System.register("chunks:///_virtual/ActionState.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"16c1a+vU7dFD5bfQyxMplXl","ActionState",void 0);t("ActionState",(function(){this.canAction=!0,this.targets=[],this.actionMethod="attack"}));c._RF.pop()}}}));

System.register("chunks:///_virtual/BasicMetaState.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,r;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){r=n.cclegacy}],execute:function(){r._RF.push({},"050cek4Yo9INbyWKsdqZ7bj","BasicMetaState",void 0);n("BasicMetaState",function(){function n(){this.id=void 0,this.name=void 0,this.introduce=void 0}n.getMetaInstance=function(n){var t=new this;return t.id=n,t};var r=n.prototype;return r.OnCreateState=function(n){},r.GetOnFightBegan=function(){return t(e().mark((function n(t,r){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},r.GetOnRoundBegan=function(){return t(e().mark((function n(t,r,c){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},r.GetOnRoundEnd=function(){return t(e().mark((function n(t,r,c){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},r.GetOnBeHurt=function(){return t(e().mark((function n(t,r,c){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},r.GetOnBeCure=function(){return t(e().mark((function n(t,r,c){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},r.GetOnBuff=function(){return t(e().mark((function n(t,r,c){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},r.GetBeforeAction=function(){return t(e().mark((function n(t,r,c){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},r.GetAfterAction=function(){return t(e().mark((function n(t,r){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},r.GetOnAttack=function(){return t(e().mark((function n(t,r,c){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},r.GetOnSkill=function(){return t(e().mark((function n(t,r,c){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},r.GetOnDead=function(){return t(e().mark((function n(t,r){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},r.GetonReBirth=function(){return t(e().mark((function n(t,r){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BasicState.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"4e73ffpZcNNVZUjdPfoOtys","BasicState",void 0);t("BasicState",(function(t){this.id=void 0,this.name=void 0,this.meta=void 0,this.OnFightBegan=void 0,this.OnRoundEnd=void 0,this.OnRoundBegan=void 0,this.OnBeHurt=void 0,this.OnBeCure=void 0,this.OnBuff=void 0,this.BeforeAction=void 0,this.AfterAction=void 0,this.OnAttack=void 0,this.OnSkill=void 0,this.OnDead=void 0,this.onReBirth=void 0,this.meta=t,this.id=t.id,this.name=t.name,this.OnFightBegan=t.GetOnFightBegan(),this.OnRoundBegan=t.GetOnRoundBegan(),this.OnRoundEnd=t.GetOnRoundEnd(),this.OnBeHurt=t.GetOnBeHurt(),this.OnBeCure=t.GetOnBeCure(),this.OnBuff=t.GetOnBuff(),this.BeforeAction=t.GetBeforeAction(),this.AfterAction=t.GetAfterAction(),this.OnAttack=t.GetOnAttack(),this.OnSkill=t.GetOnSkill(),this.OnDead=t.GetOnDead(),this.onReBirth=t.GetonReBirth()}));i._RF.pop()}}}));

System.register("chunks:///_virtual/bleed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEnum.ts","./BuffMetaState.ts"],(function(e){var t,n,r,u,c,a;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){u=e.cclegacy},function(e){c=e.RegisterBuff},function(e){a=e.BuffMetaState}],execute:function(){var o;u._RF.push({},"3b7b4KIQdNOWrcf9OfBvQwm","bleed",void 0);e("BleedBuff",c({id:"bleed"})(o=function(e){function u(){for(var t,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return(t=e.call.apply(e,[this].concat(r))||this).name="流血",t.isDeBuff=!0,t.introduce="每回合开始造成指定伤害",t.buffIcon="game/fight_entity/buff/bleed/spriteFrame",t}t(u,e);var c=u.prototype;return c.GetOnCreate=function(){return n(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=n||{},t.state.set("roundReduceBleed",n.roundReduceBleed||0);case 2:case"end":return e.stop()}}),e)})))},c.GetOnRoundBegan=function(){return n(r().mark((function e(t,n,u){var c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Math.ceil(t.state.get("roundReduceBleed")||1),t.character.hp-=c,!u.isPlayAnimation){e.next=7;break}return e.next=5,t.character.component.showString("流血-"+c);case 5:return e.next=7,t.character.component.updateUi();case 7:case"end":return e.stop()}}),e)})))},u}(a))||o);u._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEnum.ts",["cc","./error.ts"],(function(e){var n,r;return{setters:[function(e){n=e.cclegacy},function(e){r=e.error}],execute:function(){e("RegisterBuff",(function(e){return function(n){if(t[e.id])return r("The id: "+e.id+" has been registered");t[e.id]=n.getMetaInstance(e.id)}})),n._RF.push({},"cdf64j34XBFi6DI9MglrYzX","BuffEnum",void 0);var t=e("BuffEnum",{});n._RF.pop()}}}));

System.register("chunks:///_virtual/BuffMetaState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasicMetaState.ts"],(function(t){var e,n,r,a,c;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy},function(t){c=t.BasicMetaState}],execute:function(){a._RF.push({},"61093L0hJJOBp9TG9UCeDRE","BuffMetaState",void 0);t("BuffMetaState",function(t){function a(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).buffIcon="",e.isDeBuff=!0,e}e(a,t);var c=a.prototype;return c.GetOnCreate=function(){return n(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))},c.GetOnAddToCharacter=function(){return n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))},c.GetOnDeleteFromCharacter=function(){return n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))},a}(c));a._RF.pop()}}}));

System.register("chunks:///_virtual/BuffState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasicState.ts","./BuffEnum.ts"],(function(t){var e,n,a,r,c;return{setters:[function(t){e=t.inheritsLoose,n=t.assertThisInitialized},function(t){a=t.cclegacy},function(t){r=t.BasicState},function(t){c=t.BuffEnum}],execute:function(){a._RF.push({},"a264fVESCpAaoF8tnMi2kcZ","BuffState",void 0);t("BuffState",function(t){function a(e,a){var r,i=c[e.id];return(r=t.call(this,i)||this).character=null,r.state=new Map,r.OnCreate=void 0,r.OnAddToCharacter=void 0,r.OnDeleteFromCharacter=void 0,r.OnCreate=i.GetOnCreate(),r.OnAddToCharacter=i.GetOnAddToCharacter(),r.OnDeleteFromCharacter=i.GetOnDeleteFromCharacter(),r.OnCreate(n(r),a),r}return e(a,t),a}(r));a._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterEnum.ts",["cc"],(function(e){var r,t;return{setters:[function(e){r=e.cclegacy,t=e.error}],execute:function(){e("RegisterCharacter",(function(e){return function(r){if(n[e.id])return t("The id: "+e.id+" has been registered");n[e.id]=r.getMetaInstance(e.id)}})),r._RF.push({},"e5ca1E11m9ADoCnOPT3aWkp","CharacterEnum",void 0);var n=e("CharacterEnum",{});r._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterMetaState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasicMetaState.ts","./HolCharacter.ts","./util.ts"],(function(t){var e,n,o,a,r,i,c,s,u;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,i=t.resources},function(t){c=t.BasicMetaState},function(t){s=t.GetCharacterCoordinatePosition},function(t){u=t.util}],execute:function(){t("getCampHurtPercent",(function(t,e){return"ordinary"===t||"ordinary"===e?1:"machine"===t&&"nature"===e?1.2:"nature"===t&&"machine"===e?.8:1})),r._RF.push({},"89cbdPiDa1LzailO7ZG/mLe","CharacterMetaState",void 0);t("CharacterMetaState",function(t){function r(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).AnimationDir=void 0,e.AnimationScale=1,e.AnimationPosition={x:0,y:0},e.AnimationForward=1,e.AnimationType="Spine",e.AnimationBundle=i,e.AvatarPath=void 0,e.CharacterCamp="ordinary",e.CharacterQuality=1,e.Energy=100,e.HpGrowth=0,e.AttackGrowth=0,e.DefenceGrowth=0,e.SpeedGrowth=0,e.PierceGrowth=0,e.Block=0,e.Critical=0,e.AttackIntroduce="普通攻击\n\n    对一个敌人造成攻击力 100% 的伤害\n    ",e.BasicHp=7e3,e.BasicAttack=1800,e.BasicUltAttack=4500,e.BasicSpeed=150,e.strength=0,e.agility=0,e.intelligence=0,e.PassiveIntroduceOne="技能1\n    \n    无\n    ",e.PassiveIntroduceTwo="技能2\n    \n    无\n    ",e.SkillIntroduce="普通攻击\n    \n    对一个敌人造成攻击力 130% 的伤害\n    ",e}return e(r,t),r.prototype.GetOnAttack=function(){return n(o().mark((function t(e,n,r){var i,c,l,m;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((i=e.component.getEnimies(r.allLiveCharacter)).length<=0)){t.next=3;break}return t.abrupt("return");case 3:if(i=i.sort((function(t,e){return t.coordinate.col-e.coordinate.col})),n.targets.push(i[0].state),!r.isPlayAnimation){t.next=10;break}return t.next=8,u.sundry.moveNodeToPosition(e.component.node,{targetPosition:s(n.targets[0].component.direction,n.targets[0].component.coordinate.row,n.targets[0].component.coordinate.col,"attack"),moveCurve:!0,moveTimeScale:n.targets[0].component.holAnimation.timeScale});case 8:return t.next=10,e.component.holAnimation.playAnimation("attack",1,e.component.defaultState);case 10:c=a(n.targets);case 11:if((l=c()).done){t.next=17;break}return m=l.value,t.next=15,e.component.attack(1*e.attack,m.component);case 15:t.next=11;break;case 17:if(!r.isPlayAnimation){t.next=20;break}return t.next=20,u.sundry.moveNodeToPosition(e.component.node,{targetPosition:s(e.component.direction,e.component.coordinate.row,e.component.coordinate.col,"ordinary"),moveCurve:!0,moveTimeScale:e.component.holAnimation.timeScale});case 20:return t.abrupt("return");case 21:case"end":return t.stop()}}),t)})))},r}(c));r._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasicState.ts","./CharacterEnum.ts","./EquipmentState.ts"],(function(e){var t,i,n,a,r,c;return{setters:[function(e){t=e.inheritsLoose,i=e.assertThisInitialized},function(e){n=e.cclegacy},function(e){a=e.BasicState},function(e){r=e.CharacterEnum},function(e){c=e.EquipmentState}],execute:function(){n._RF.push({},"644caBHM/BJPZg2loSh3ofV","CharacterState",void 0);e("CharacterState",function(e){function n(t,n){var a,c=r[t.id];return(a=e.call(this,c)||this).component=void 0,a.name=void 0,a.lv=void 0,a.star=void 0,a.create=void 0,a.hp=void 0,a.maxHp=void 0,a.energy=void 0,a.maxEnergy=void 0,a.attack=void 0,a.defence=void 0,a.speed=void 0,a.pierce=void 0,a.curePercent=1,a.hurtPercent=1,a.FreeInjuryPercent=0,a.critical=void 0,a.block=0,a.buff=[],a.equipment=[],a.strength1=0,a.agility1=0,a.intelligence1=0,a.lv=t.lv,a.star=t.star,a.name=c.name,a.component=n,a.create=t,a.maxEnergy=c.Energy,a.maxHp=c.BasicHp+200*t.strength,a.attack=c.BasicAttack+130*t.strength,a.defence=0,a.speed=c.BasicSpeed+5*t.agility+(t.isDefencer?1:0),a.pierce=0,a.critical=0,a.block=c.Block,a.strength1=t.strength,a.agility1=t.agility,a.intelligence1=t.intelligence,t.equipment.forEach((function(e){return a.addEquipment(e)})),c.OnCreateState(i(a)),a.hp=a.maxHp,a.energy=30,a}t(n,e);var a=n.prototype;return a.reasonableData=function(){this.hp>this.maxHp&&(this.hp=this.maxHp),this.energy>this.maxEnergy&&(this.energy=this.maxEnergy),this.hp<0&&(this.hp=0),this.energy<0&&(this.energy=0)},a.addEquipment=function(e){var t=new c(e,this);this.equipment.push(t),t.AddPropertyToCharacter(t)},n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/common.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"2b47eVzx8dC47V1LUAfV6ry","common",void 0);t("common",new function(){this.leftCharacter=new Map,this.rightCharacter=new Map});e._RF.pop()}}}));

System.register("chunks:///_virtual/CommonCanvas.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var o,t,r,e;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,r=n._decorator,e=n.Component}],execute:function(){var a;t._RF.push({},"4d33d7k6XVLSoM+waFn6YkT","CommonCanvas",void 0);var s=r.ccclass;r.property,n("CommonCanvas",s("CommonCanvas")(a=function(n){function t(){return n.apply(this,arguments)||this}o(t,n);var r=t.prototype;return r.start=function(){},r.update=function(n){},t}(e))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/config.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,n,r;return{setters:[function(e){t=e.inheritsLoose,a=e.assertThisInitialized,n=e.extends},function(e){r=e.cclegacy}],execute:function(){e({getConfig:function(){if(l)return l;var e=localStorage.getItem("UserConfigData");return l=e?new o(JSON.parse(e)):new o},stockConfig:function(){l.userData.backpack=l.userData.backpack.filter((function(e){return e.number>0})),localStorage.setItem("UserConfigData",JSON.stringify(l))}}),r._RF.push({},"8739fIbVfVABb2YCP/ZRxZw","config",void 0);var i=e("Resource",(function(){this.gold=1e8,this.diamond=1e5,this.soul=1e8})),u=function(e){var t=this;this.fight=1,this.home=1,this.character=1,e&&Object.keys(e).forEach((function(a){return t[a]=e[a]}))},c=1,s=function(e){function r(t){var r;return(r=e.call(this)||this).lv=1,r.exp=0,r.name="用户12138",r.backpack=[],r.equipments=[],r.characters=[],r.characterQueue=[[null,null,null],[null,null,null],[null,null,null]],r.hasCollectCharacterId=[],r.addNewCharacter({id:"sunwukong",lv:100,star:3,equipment:[]}),r.addNewCharacter({id:"fearOfDemons",lv:90,star:1,equipment:[]}),t?(r.lv=t.lv||1,r.exp=t.exp||1,r.gold=t.gold||1e3,r.diamond=t.diamond||100,r.soul=t.soul||1e3,r.hasCollectCharacterId=t.hasCollectCharacterId||[],(t.backpack||[]).forEach((function(e){return r.addNewItem(e.id,e.number)})),(t.characters||[]).forEach((function(e){r.addNewCharacter(e)})),(t.equipments||[]).forEach((function(e){r.addNewEquipment(e.id,e.lv)})),t.characterQueue.forEach((function(e,t){return e.forEach((function(e,a){return r.characterQueue[t][a]=n({},e,{uuid:++c})}))})),r):a(r)}t(r,e);var i=r.prototype;return i.addNewEquipment=function(e,t,a){this.equipments.push({id:e,lv:t||1,uuid:++c,quality:a||1})},i.addNewCharacter=function(e){var t=[];(e.equipment||[]).forEach((function(e){return t.push(n({},e,{uuid:++c}))})),this.characters.push(n({},e,{star:e.star||1,equipment:t,uuid:++c})),-1===this.hasCollectCharacterId.indexOf(e.id)&&this.hasCollectCharacterId.push(e.id)},i.addNewItem=function(e,t){for(var a=0;a<this.backpack.length;a++){var n=this.backpack[a];if(n.id===e)return void(n.number+=t)}this.backpack.push({id:e,number:t})},r}(i),o=function(e){var t=this;this.version="0.0.1",this.volume=.1,this.userData=new s,this.volumeDetail=new u,e&&e.version===this.version&&(Object.keys(e).forEach((function(a){return t[a]=e[a]})),this.userData=new s(e.userData),this.volumeDetail=new u(e.volumeDetail))},l=null;r._RF.pop()}}}));

System.register("chunks:///_virtual/confirm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HolConfirmMessage.ts","./load2.ts","./getNodePool.ts"],(function(n){var e,t,r,o,s,i,c,u;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){r=n.cclegacy,o=n.Prefab,s=n.find},function(n){i=n.HolConfirmMessage},function(n){c=n.load},function(n){u=n.getNodePool}],execute:function(){function a(){return(a=e(t().mark((function n(){var e,r;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=u,n.next=3,c("prefab/HolConfirmMessage",o);case 3:n.t1=n.sent,e=(0,n.t0)(n.t1),r=e.get(),e.put(r);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function f(){return(f=e(t().mark((function n(e,r){var a,f,l;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===r&&(r=s("Canvas")),n.t0=u,n.next=4,c("prefab/HolConfirmMessage",o);case 4:return n.t1=n.sent,a=(0,n.t0)(n.t1),f=a.get(),r.addChild(f),l=f.getComponent(i),n.abrupt("return",new Promise((function(n){l.setContent(e),l.listen("sure",(function(){n(!0),l.closeConfirm()})),l.listen("cancel",(function(){n(!1),l.closeConfirm()})),l.listen("close",(function(){return a.put(f)}))})));case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}n({confirm:function(n,e){return f.apply(this,arguments)},preloadConfirm:function(){return a.apply(this,arguments)}}),r._RF.push({},"2792eQTRFZNR6k4+6PgV6rD","confirm",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentEnum.ts",["cc","./error.ts"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy},function(e){t=e.error}],execute:function(){e("RegisterEquipemtn",(function(e){return function(n){if(r[e.id])return t("The id: "+e.id+" has been registered");r[e.id]=n.getMetaInstance(e.id)}})),n._RF.push({},"a8a6erACBlNPYv1jPhBMAQ7","EquipmentEnum",void 0);var r=e("EquipmentEnum",{});n._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentMetaState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasicMetaState.ts"],(function(t){var e,r,c,a,n;return{setters:[function(t){e=t.inheritsLoose,r=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){a=t.cclegacy},function(t){n=t.BasicMetaState}],execute:function(){a._RF.push({},"1286cKDtd5Hfp1/cB1/cAt8","EquipmentMetaState",void 0);t("EquipmentMetaState",function(t){function a(){for(var e,r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))||this).HpGrowth=100,e.AttackGrowth=50,e.DefenceGrowth=40,e.SpeedGrowth=30,e.CurePercent=1,e.HurtPercent=1,e.Block=5,e.Critical=5,e}return e(a,t),a.prototype.GetAddPropertyToCharacter=function(){return r(c().mark((function t(e){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.character.maxHp+=e.maxHp,e.character.attack+=e.attack,e.character.defence+=e.defence,e.character.speed+=e.speed,e.character.curePercent+=e.curePercent,e.character.hurtPercent+=e.hurtPercent,e.character.critical+=e.critical,e.character.block+=e.block;case 8:case"end":return t.stop()}}),t)})))},a}(n));a._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasicState.ts","./EquipmentEnum.ts"],(function(t){var e,c,r,i;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy},function(t){r=t.BasicState},function(t){i=t.EquipmentEnum}],execute:function(){c._RF.push({},"dc76cGpfZtHrrEa5QCwW4fV","EquipmentState",void 0);t("EquipmentState",function(t){function c(e,c){var r,n=i[e.id];return(r=t.call(this,n)||this).character=void 0,r.maxHp=void 0,r.attack=void 0,r.defence=void 0,r.speed=void 0,r.curePercent=void 0,r.hurtPercent=void 0,r.critical=void 0,r.block=void 0,r.AddPropertyToCharacter=void 0,r.character=c,r.maxHp=e.lv*n.HpGrowth,r.attack=e.lv*n.AttackGrowth,r.defence=e.lv*n.DefenceGrowth,r.speed=e.lv*n.SpeedGrowth,r.curePercent=n.CurePercent,r.hurtPercent=n.HurtPercent,r.critical=n.Critical,r.block=n.Block,r}return e(c,t),c}(r));c._RF.pop()}}}));

System.register("chunks:///_virtual/error.ts",["cc"],(function(r){var e,t;return{setters:[function(r){e=r.cclegacy,t=r.error}],execute:function(){r("error",(function(){return t.apply(void 0,arguments)})),e._RF.push({},"c604bBOOTxM0axtDbhzKuzO","error",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/fear.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEnum.ts","./BuffMetaState.ts"],(function(){var e,t,n,r,a,o,c;return{setters:[function(r){e=r.inheritsLoose,t=r.asyncToGenerator,n=r.regeneratorRuntime},function(e){r=e.cclegacy,a=e.math},function(e){o=e.RegisterBuff},function(e){c=e.BuffMetaState}],execute:function(){var i;r._RF.push({},"e9a61Q2SnVNHb2Q63shNcJS","fear",void 0);o({id:"fear"})(i=function(r){function o(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))||this).name="恐惧",e.isDeBuff=!0,e.introduce="恐惧后有70%的概率不敢出手",e.buffIcon="game/fight_entity/buff/fear/spriteFrame",e}return e(o,r),o.prototype.GetBeforeAction=function(){return t(n().mark((function e(t,r,o){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.randomRange(0,100)<70)){e.next=5;break}if(!o.isPlayAnimation){e.next=4;break}return e.next=4,t.character.component.showString("恐惧");case 4:r.canAction=!1;case 5:case"end":return e.stop()}}),e)})))},o}(c));r._RF.pop()}}}));

System.register("chunks:///_virtual/fearOfDemons.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HolCharacter.ts","./util.ts","./CharacterEnum.ts","./CharacterMetaState.ts","./BuffState.ts"],(function(e){var t,n,o,a,r,c,i,s,u,m;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,o=e.regeneratorRuntime,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy},function(e){c=e.GetCharacterCoordinatePosition},function(e){i=e.util},function(e){s=e.RegisterCharacter},function(e){u=e.CharacterMetaState},function(e){m=e.BuffState}],execute:function(){var p;r._RF.push({},"3dc09mUBAVOq6FdyatsMh3x","fearOfDemons",void 0);e("Character",s({id:"fearOfDemons"})(p=function(e){function r(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).name="恐魔",t.AnimationDir="game/fight_entity/character/fearOfDemons",t.AvatarPath="game/fight_entity/character/fearOfDemons/avatar/spriteFrame",t.AnimationType="Spine",t.AnimationScale=.65,t.HpGrowth=45,t.AttackGrowth=30,t.DefenceGrowth=15,t.PierceGrowth=15,t.SpeedGrowth=17,t.Energy=90,t.CharacterCamp="dark",t.CharacterQuality=4,t.PassiveIntroduceOne="\n    \n    额外获得 20% 攻击力\n    额外获得 20% 护甲穿透\n    ".replace(/ /gi,""),t.PassiveIntroduceTwo="\n    \n    额外获得 15% 攻击力\n    普通攻击有20%的概率会恐惧敌人 持续两回合\n    ".replace(/ /gi,""),t.SkillIntroduce="\n    \n    对一个随机敌人造成150%攻击力的伤害\n    并且造成 50% 攻击力的流血2回合\n    ".replace(/ /gi,""),t}t(r,e);var s=r.prototype;return s.OnCreateState=function(e){e.star>=2&&(e.attack*=1.2,e.pierce*=1.2),e.star>=4&&(e.attack*=1.15)},s.GetOnAttack=function(){return n(o().mark((function e(t,n,r){var s,u,p,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((s=t.component.getEnimies(r.allLiveCharacter)).length<=0)){e.next=3;break}return e.abrupt("return");case 3:if(s=s.sort((function(e,t){return e.coordinate.col-t.coordinate.col})),n.targets.push(s[0].state),!r.isPlayAnimation){e.next=10;break}return e.next=8,i.sundry.moveNodeToPosition(t.component.node,{targetPosition:c(n.targets[0].component.direction,n.targets[0].component.coordinate.row,n.targets[0].component.coordinate.col,"attack"),moveCurve:!0,moveTimeScale:n.targets[0].component.holAnimation.timeScale});case 8:return e.next=10,t.component.holAnimation.playAnimation("attack",1,t.component.defaultState);case 10:u=o().mark((function e(){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.value,t.star>=4&&Math.random()<.2&&(a=new m({id:"fear"}),n.component.addBuff(t.component,a),r.listenRoundEvent(2,(function(){return n.component.deleteBuff(a)}))),r.actionAwaitQueue.push(t.component.attack(1*t.attack,n.component));case 3:case"end":return e.stop()}}),e)})),p=a(n.targets);case 12:if((l=p()).done){e.next=16;break}return e.delegateYield(u(),"t0",14);case 14:e.next=12;break;case 16:if(!r.isPlayAnimation){e.next=19;break}return e.next=19,i.sundry.moveNodeToPosition(t.component.node,{targetPosition:c(t.component.direction,t.component.coordinate.row,t.component.coordinate.col,"ordinary"),moveCurve:!0,moveTimeScale:t.component.holAnimation.timeScale});case 19:return e.abrupt("return");case 20:case"end":return e.stop()}}),e)})))},s.GetOnSkill=function(){return n(o().mark((function e(t,n,r){var s,u,p,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((s=t.component.getEnimies(r.allLiveCharacter)).length<=0)){e.next=3;break}return e.abrupt("return");case 3:if(n.targets.push(s[Math.floor(s.length*Math.random())].state),!r.isPlayAnimation){e.next=9;break}return e.next=7,i.sundry.moveNodeToPosition(t.component.node,{targetPosition:c(n.targets[0].component.direction,n.targets[0].component.coordinate.row,n.targets[0].component.coordinate.col,"attack"),moveCurve:!1,moveTimeScale:n.targets[0].component.holAnimation.timeScale});case 7:return e.next=9,t.component.holAnimation.playAnimation("skill",1,t.component.defaultState);case 9:u=o().mark((function e(){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.value,a=new m({id:"bleed"},{roundReduceBleed:.5*t.attack}),n.component.addBuff(t.component,a),r.listenRoundEvent(2,(function(){return n.component.deleteBuff(a)})),r.actionAwaitQueue.push(t.component.attack(1.5*t.attack,n.component));case 5:case"end":return e.stop()}}),e)})),p=a(n.targets);case 11:if((l=p()).done){e.next=15;break}return e.delegateYield(u(),"t0",13);case 13:e.next=11;break;case 15:if(!r.isPlayAnimation){e.next=18;break}return e.next=18,i.sundry.moveNodeToPosition(t.component.node,{targetPosition:c(t.component.direction,t.component.coordinate.row,t.component.coordinate.col,"ordinary"),moveCurve:!0,moveTimeScale:t.component.holAnimation.timeScale});case 18:return e.abrupt("return");case 19:case"end":return e.stop()}}),e)})))},r}(u))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/FightCanvas.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./config.ts"],(function(t){var n,e,o,r,i,a,u,c,s,l;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){r=t.cclegacy,i=t._decorator,a=t.Component,u=t.AudioSource,c=t.AudioClip},function(t){s=t.util},function(t){l=t.getConfig}],execute:function(){var p;r._RF.push({},"13e46cApPRM+I+/SCiCGUpl","FightCanvas",void 0);var h=i.ccclass;i.property,t("FightCanvas",h("FightCanvas")(p=function(t){function r(){return t.apply(this,arguments)||this}return n(r,t),r.prototype.start=function(){var t=e(o().mark((function t(){var n,e,r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l(),t.next=3,s.bundle.loadDir("sound/fight/back",c);case 3:e=t.sent,r=e[Math.floor(e.length*Math.random())],(i=this.node.getComponent(u)).clip=r,i.volume=n.volume*n.volumeDetail.home,i.play();case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r}(a))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/FightFailure.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,n;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,i=t._decorator,n=t.Component}],execute:function(){var o;r._RF.push({},"ce498cPYhlP4p56ojo+DbAj","FightFailure",void 0);var u=i.ccclass;i.property,t("FightFailure",u("FightFailure")(o=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var i=r.prototype;return i.start=function(){},i.update=function(t){},r}(n))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/FightMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./HolCharacter.ts","./RoundState.ts","./common.ts","./HolPreLoad.ts"],(function(e){var t,n,r,a,i,s,c,u,o,l,h,f,d,g,p,x,b,v;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime,a=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,s=e._decorator,c=e.Component,u=e.Sprite,o=e.math,l=e.SpriteFrame,h=e.NodeEventType,f=e.instantiate,d=e.Prefab},function(e){g=e.util},function(e){p=e.HolCharacter},function(e){x=e.RoundState},function(e){b=e.common},function(e){v=e.HolPreLoad}],execute:function(){var k;i._RF.push({},"f32422n0itG4aglbinrHSSE","FightMap",void 0);var m=s.ccclass;s.property,e("FightMap",m("FightMap")(k=function(e){function i(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).currentRound=1,t.isPlayAnimation=!0,t.allRoundQueue=new Map,t.allLiveCharacter=[],t.allDeadCharacter=[],t.actionAwaitQueue=[],t}t(i,e);var s=i.prototype;return s.start=function(){var e=n(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("message",n(r().mark((function e(n){var a,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={challenger:null,defender:null};try{i=JSON.parse(n.data),a=i}catch(e){console.log("数据格式错误")}if(console.log("battleData",a),null!=a.challenger&&null!=a.defender){e.next=5;break}return e.abrupt("return");case 5:return console.log("battleData",a),b.leftCharacter.set({row:2,col:2},{id:"sunwukong",lv:1,star:1,equipment:[],strength:a.challenger.strength,agility:a.challenger.agility,intelligence:a.challenger.intelligence,isDefencer:!1}),b.rightCharacter.set({row:2,col:2},{id:"sunwukong",lv:1,star:1,equipment:[],strength:a.defender.strength,agility:a.defender.agility,intelligence:a.defender.intelligence,isDefencer:!0}),console.log("数据改了"),e.next=11,t.battle();case 11:console.log("打架了");case 12:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.battle=function(){var e=n(r().mark((function e(){var t,i,s,c,h,f,d,p,x,k=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.node.parent.getChildByName("HolPreLoad").getComponent(v)).setTips(["战斗资源正在加载"]),t.setProcess(20),e.next=5,g.bundle.loadDir("image/fightMap",l);case 5:i=e.sent,this.node.getComponent(u).spriteFrame=i[Math.floor(o.randomRange(0,i.length))],t.setProcess(50),s=50,c=a(b.leftCharacter);case 10:if((h=c()).done){e.next=17;break}return f=h.value,e.next=14,this.setCharacter(f[1],"left",f[0]);case 14:t.setProcess(s+=20/b.leftCharacter.size);case 15:e.next=10;break;case 17:d=a(b.rightCharacter);case 18:if((p=d()).done){e.next=25;break}return x=p.value,e.next=22,this.setCharacter(x[1],"right",x[0]);case 22:t.setProcess(s+=20/b.rightCharacter.size);case 23:e.next=18;break;case 25:t.listenComplete(n(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:return e.next=4,k.fightStart();case 4:(t=e.sent)?k.fightSuccess():k.fightEnd(),n=JSON.stringify({result:t,isEnd:!0}),window.postMessage(n),console.log("Result",t),console.log("IsEnd",!0);case 10:case"end":return e.stop()}}),e)})))),t.setProcess(100);case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.listenRoundEvent=function(e,t){var n=this.allRoundQueue.get(this.currentRound+e+1);if(!n)return this.allRoundQueue.set(this.currentRound+e+1,n=[t]);n.push(t)},s.fightStart=function(){var e=n(r().mark((function e(){var t,n,i,s,c,u,o,l,h,f,d,g,p,b,v,k,m,C,w,y,R,F,L,O,S,P,E,B,D,H,M,N,Q,A,T;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a(this.allLiveCharacter);case 1:if((n=t()).done){e.next=21;break}i=n.value,s=a(i.state.buff);case 4:if((c=s()).done){e.next=10;break}return u=c.value,e.next=8,u.OnFightBegan(u,this);case 8:e.next=4;break;case 10:o=a(i.state.equipment);case 11:if((l=o()).done){e.next=17;break}return h=l.value,e.next=15,h.OnFightBegan(h,this);case 15:e.next=11;break;case 17:return e.next=19,i.state.OnFightBegan(i.state,this);case 19:e.next=1;break;case 21:if(!(this.currentRound<=150)){e.next=107;break}f=new x,d=[].concat(this.allLiveCharacter).sort((function(e,t){return t.state.speed-e.state.speed})),g=a(this.allRoundQueue.get(this.currentRound)||[]);case 25:if((p=g()).done){e.next=31;break}return b=p.value,e.next=29,b();case 29:e.next=25;break;case 31:v=a(d);case 32:if((k=v()).done){e.next=54;break}if(m=k.value,-1!==this.allLiveCharacter.indexOf(m)){e.next=36;break}return e.abrupt("break",54);case 36:C=a(m.state.buff);case 37:if((w=C()).done){e.next=43;break}return y=w.value,e.next=41,y.OnRoundBegan(y,f,this);case 41:e.next=37;break;case 43:R=a(m.state.equipment);case 44:if((F=R()).done){e.next=50;break}return L=F.value,e.next=48,L.OnRoundBegan(L,f,this);case 48:e.next=44;break;case 50:return e.next=52,m.state.OnRoundBegan(m.state,f,this);case 52:e.next=32;break;case 54:O=a(d);case 55:if((S=O()).done){e.next=72;break}if(P=S.value,-1!==this.allLiveCharacter.indexOf(P)){e.next=59;break}return e.abrupt("continue",70);case 59:return e.next=61,P.action();case 61:return e.next=63,Promise.all(this.actionAwaitQueue);case 63:if(this.actionAwaitQueue=[],!(this.allLiveCharacter.filter((function(e){return"left"===e.direction})).length<=0)){e.next=68;break}return e.abrupt("return",!1);case 68:if(!(this.allLiveCharacter.filter((function(e){return"right"===e.direction})).length<=0)){e.next=70;break}return e.abrupt("return",!0);case 70:e.next=55;break;case 72:E=a(d);case 73:if((B=E()).done){e.next=95;break}if(D=B.value,-1!==this.allLiveCharacter.indexOf(D)){e.next=77;break}return e.abrupt("break",95);case 77:H=a(D.state.buff);case 78:if((M=H()).done){e.next=84;break}return N=M.value,e.next=82,N.OnRoundEnd(N,f,this);case 82:e.next=78;break;case 84:Q=a(D.state.equipment);case 85:if((A=Q()).done){e.next=91;break}return T=A.value,e.next=89,T.OnRoundEnd(T,f,this);case 89:e.next=85;break;case 91:return e.next=93,D.state.OnRoundEnd(D.state,f,this);case 93:e.next=73;break;case 95:if(this.currentRound++,!this.isPlayAnimation){e.next=99;break}return e.next=99,new Promise((function(e){return setTimeout(e,300)}));case 99:if(!(this.allLiveCharacter.filter((function(e){return"left"===e.direction})).length<=0)){e.next=103;break}return e.abrupt("return",!1);case 103:if(!(this.allLiveCharacter.filter((function(e){return"right"===e.direction})).length<=0)){e.next=105;break}return e.abrupt("return",!0);case 105:e.next=21;break;case 107:return e.abrupt("return",!1);case 108:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.setCharacter=function(){var e=n(r().mark((function e(t,n,a){var i,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.bundle.load("prefab/HolCharacter",d);case 2:return i=e.sent,s=f(i),this.node.addChild(s),c=s.getComponent(p),e.next=8,c.initCharacter(t,n,a,this);case 8:this.node.on(h.NODE_DESTROYED,(function(){s.parent.removeChild(s)})),this.allLiveCharacter.push(c);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),s.fightSuccess=function(){this.node.parent.getChildByName("FightFailure").active=!1,this.node.parent.getChildByName("FightSuccess").active=!0},s.fightEnd=function(){this.node.parent.getChildByName("FightFailure").active=!0,this.node.parent.getChildByName("FightSuccess").active=!1},i}(c))||k);i._RF.pop()}}}));

System.register("chunks:///_virtual/FightSuccess.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var c,e,n,r;return{setters:[function(t){c=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.Component}],execute:function(){var s;e._RF.push({},"c818791rgRPE4iXWMeZ8+mI","FightSuccess",void 0);var o=n.ccclass;n.property,t("FightSuccess",o("FightSuccess")(s=function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var n=e.prototype;return n.start=function(){},n.update=function(t){},e}(r))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/FightUi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HolCharacter.ts","./util.ts","./FightMap.ts"],(function(e){var t,i,r,n,a,o,c,s,l,u,p,h,g,m,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose,o=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,u=e.Node,p=e.Label,h=e.Component},function(e){g=e.HolCharacter},function(e){m=e.util},function(e){f=e.FightMap}],execute:function(){var d,F,y,v,S;s._RF.push({},"8b8eap4J+xBHrJ+oBQjjzgR","FightUi",void 0);var C=l.ccclass,M=l.property;e("FightUi",(d=C("FightUi"),F=M(u),d((S=t((v=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"FightMapNode",S,n(t)),t.timeScale=1,t}i(t,e);var s=t.prototype;return s.setTimeScale=function(e){this.timeScale++,this.timeScale>3&&(this.timeScale=1);for(var t,i=a(this.FightMapNode.children);!(t=i()).done;){t.value.getComponent(g).holAnimation.timeScale=this.timeScale}e.target.getChildByName("Value").getComponent(p).string="x"+this.timeScale},s.skipFight=function(){var e=o(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.message.confirm({message:"确定要跳过战斗吗?"});case 2:e.sent&&(this.FightMapNode.getComponent(f).isPlayAnimation=!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(h)).prototype,"FightMapNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=v))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/formateNumber.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("formateNumber",(function(e){var t=e+"";e>=1e8?t=(e/1e5).toFixed(2)+"B":e>=1e7?t=(e/1e4).toFixed(2)+"M":e>=1e6?t=(e/1e4).toFixed(2)+"W":e>=1e4&&(t=(e/1e3).toFixed(2)+"K");return t})),t._RF.push({},"8d1d6IZfGBAOog8kajMNSZd","formateNumber",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/getNodePool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var e,t,n,i;return{setters:[function(o){e=o.createClass},function(o){t=o.cclegacy,n=o.instantiate,i=o.NodePool}],execute:function(){o("getNodePool",(function(o){var e=s.get(o);return e||(e=new r(o),s.set(o,e),e)})),t._RF.push({},"fd71bFIxJNI6p4kQfQ5MVwu","getNodePool",void 0);var r=function(){function o(o){this.$prefab=void 0,this.$nodePool=void 0,this.$prefab=o,this.$nodePool=new i;for(var e=0;e<5;e++)this.$nodePool.put(n(o))}var t=o.prototype;return t.get=function(){return this.$nodePool.size()<=0?n(this.$prefab):this.$nodePool.get()},t.put=function(o){return this.$nodePool.put(o)},e(o,[{key:"size",get:function(){return this.$nodePool.size}}]),o}(),s=new Map;t._RF.pop()}}}));

System.register("chunks:///_virtual/HeroAllHeros.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./config.ts","./HolCharactersQueue.ts","./HeroCharacterDetail.ts"],(function(e){var r,t,n,a,o,c,s,u,i,f;return{setters:[function(e){r=e.inheritsLoose,t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){a=e.cclegacy,o=e._decorator,c=e.Component},function(e){s=e.util},function(e){u=e.getConfig},function(e){i=e.HolCharactersQueue},function(e){f=e.HeroCharacterDetail}],execute:function(){var l;a._RF.push({},"f94f0egAs9C/71lXe/O8uCK","HeroAllHeros",void 0);var h=o.ccclass;o.property,e("HeroAllHeros",h("HeroAllHeros")(l=function(e){function a(){return e.apply(this,arguments)||this}r(a,e);var o=a.prototype;return o.start=function(){var e=t(n().mark((function e(){var r,t,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u(),e.next=3,s.message.load();case 3:return t=e.sent,a=[],r.userData.characterQueue.forEach((function(e){return e.forEach((function(e){e&&a.push(e)}))})),e.next=8,this.render([].concat(a,r.userData.characters));case 8:t();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.render=function(){var e=t(n().mark((function e(r){var a=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.node.getChildByName("HolCharactersQueue").getComponent(i).render(r,t(n().mark((function e(r,t){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=a.node.parent.getChildByName("CharacterDetail")).active=!0,e.next=4,o.getComponent(f).setCharacter(r);case 4:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),a}(c))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/HeroCanvas.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,o;return{setters:[function(e){r=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,o=e.Component}],execute:function(){var s;t._RF.push({},"1e361ZP2xFJerpLW8QKH0E+","HeroCanvas",void 0);var a=n.ccclass;n.property,e("HeroCanvas",a("HeroCanvas")(s=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){},t}(o))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/HeroCharacterDetail.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./HolAnimation.ts","./CharacterEnum.ts","./HeroCharacterDetailPorperty.ts","./HeroAllHeros.ts","./config.ts"],(function(e){var t,r,n,a,i,o,c,s,u,l,p,h,m,f,d,C,v,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,u=e.Node,l=e.Component,p=e.instantiate,h=e.Prefab},function(e){m=e.util},function(e){f=e.HolAnimation},function(e){d=e.CharacterEnum},function(e){C=e.HeroCharacterDetailPorperty},function(e){v=e.HeroAllHeros},function(e){y=e.getConfig}],execute:function(){var g,H,A,D,x;c._RF.push({},"6ece1mC3X9MrIY6zxrT7spT","HeroCharacterDetail",void 0);var N=s.ccclass,w=s.property;e("HeroCharacterDetail",(g=N("HeroCharacterDetail"),H=w(u),g((x=t((D=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"HeroAllHeroNode",x,a(t)),t.$lastaNimation=void 0,t}r(t,e);var c=t.prototype;return c.goBack=function(){var e=i(o().mark((function e(){var r,n,a,c=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.node.active=!1,r=y(),e.next=4,m.message.load();case 4:return n=e.sent,a=[],r.userData.characterQueue.forEach((function(e){return e.forEach((function(e){e&&a.push(e)}))})),e.next=9,this.HeroAllHeroNode.getComponent(v).render([].concat(a,r.userData.characters),i(o().mark((function e(r,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=c.node.parent.getChildByName("CharacterDetail")).active=!0,e.next=4,a.getComponent(t).setCharacter(r);case 4:case"end":return e.stop()}}),e)}))));case 9:n();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.setCharacter=function(){var e=i(o().mark((function e(t){var r,n,a,c,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.node.getChildByName("Property"),e.next=3,m.message.load();case 3:return n=e.sent,a=this.node.getChildByName("CharacterAnimation"),this.$lastaNimation&&a.removeChild(this.$lastaNimation),c=d[t.id],e.next=9,m.bundle.load("prefab/HolAnimation",h);case 9:return s=e.sent,u=p(s),a.addChild(u),e.next=14,u.getComponent(f).initBones({animationScale:1.7*c.AnimationScale,animationDir:c.AnimationDir,animationType:c.AnimationType,animationPosition:c.AnimationPosition});case 14:return a.addChild(u),this.$lastaNimation=u,u.active=!1,e.next=19,r.getComponent(C).renderProperty(t);case 19:return n(),setTimeout(i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.active=!0,u.getComponent(f).playAnimation("rebirth",1,"rest");case 2:case"end":return e.stop()}}),e)}))),50),e.abrupt("return");case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(l)).prototype,"HeroAllHeroNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=D))||A));c._RF.pop()}}}));

System.register("chunks:///_virtual/HeroCharacterDetailPorperty.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CharacterState.ts","./util.ts","./config.ts","./HolUserResource.ts","./CharacterEnum.ts"],(function(e){var t,a,n,r,i,s,o,c,l,h,u,d,p,m,g;return{setters:[function(e){t=e.inheritsLoose,a=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,i=e._decorator,s=e.Component,o=e.Label,c=e.find,l=e.sp,h=e.AudioSource},function(e){u=e.CharacterState},function(e){d=e.util},function(e){p=e.getConfig},function(e){m=e.HolUserResource},function(e){g=e.CharacterEnum}],execute:function(){var v;r._RF.push({},"93a3cHGdu9D9rjpsodeldha","HeroCharacterDetailPorperty",void 0);var f=i.ccclass;i.property;function C(e){return Math.ceil(g[e.id].CharacterQuality*e.lv*(e.lv/(e.lv+80)+1)*100)}function y(e){return Math.ceil(g[e.id].CharacterQuality*e.lv*(e.lv/(e.lv+80)+1)*100*.5)}e("HeroCharacterDetailPorperty",f("HeroCharacterDetailPorperty")(v=function(e){function r(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).$state=void 0,t.$answerLevelUp=!0,t}t(r,e);var i=r.prototype;return i.renderProperty=function(){var e=a(n().mark((function e(t){var a,r,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.$state=new u(t,null),this.node.getChildByName("Name").getComponent(o).string="名称: "+this.$state.meta.name,this.node.getChildByName("Lv").getComponent(o).string="Lv: "+this.$state.lv,this.node.getChildByName("Hp").getChildByName("Value").getComponent(o).string=Math.ceil(this.$state.maxHp)+"",this.node.getChildByName("Attack").getChildByName("Value").getComponent(o).string=Math.ceil(this.$state.attack)+"",this.node.getChildByName("Defence").getChildByName("Value").getComponent(o).string=Math.ceil(this.$state.defence)+"",this.node.getChildByName("Speed").getChildByName("Value").getComponent(o).string=Math.ceil(this.$state.speed)+"",(a=this.node.getChildByName("Star")).children.forEach((function(e){return e.active=!1})),a.children.forEach((function(e){return e.children[0].active=!1})),r=0;r<g[t.id].CharacterQuality;r++)a.children[r].active=!0;for(i=0;i<t.star;i++)a.children[i].children[0].active=!0;t.lv>=100?this.node.getChildByName("LevelUp").active=!1:(this.node.getChildByName("LevelUp").active=!0,this.node.getChildByName("LevelUp").getChildByName("LevelUpGold").getChildByName("Value").getComponent(o).string=d.sundry.formateNumber(C(t)),this.node.getChildByName("LevelUp").getChildByName("LevelUpSoul").getChildByName("Value").getComponent(o).string=d.sundry.formateNumber(y(t)));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.showAllProperty=function(){var e=a(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",t+=" 生命值: "+Math.ceil(this.$state.maxHp)+"\n",t+=" 攻击力: "+Math.ceil(this.$state.attack)+"\n",t+=" 防御力: "+Math.ceil(this.$state.defence)+"\n",t+=" 速度值: "+Math.ceil(this.$state.speed)+"\n",t+=" 穿透值: "+Math.ceil(this.$state.pierce)+"\n",t+=" 格挡率: "+Math.ceil(this.$state.block)+"%\n",t+=" 暴击率: "+Math.ceil(this.$state.critical)+"%\n",t+=" 免伤率: "+Math.ceil(100*this.$state.FreeInjuryPercent)+"%\n",t+=" 最大能量: "+Math.ceil(this.$state.maxEnergy)+"\n",e.next=12,d.message.introduce({message:t});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.characterLevelUp=function(){var e=a(n().mark((function e(){var t,a,r,i,s=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p(),!this.$answerLevelUp){e.next=7;break}return e.next=4,d.message.confirm({message:"确定要升级吗?",selectBoxMessage:"不再询问",selectBoxCallback:function(e){s.$answerLevelUp=!e}});case 4:if(!1!==e.sent){e.next=7;break}return e.abrupt("return");case 7:if(!(a.userData.gold<C(this.$state.create)||a.userData.soul<y(this.$state.create))){e.next=11;break}return e.next=10,d.message.prompt({message:"资源不足"});case 10:return e.abrupt("return",e.sent);case 11:return a.userData.gold-=C(this.$state.create),a.userData.soul-=y(this.$state.create),this.$state.create.lv++,e.next=16,this.renderProperty(this.$state.create);case 16:c("Canvas/HolUserResource").getComponent(m).render(),r=this.node.getChildByName("LevelUp").getChildByName("LevelUpEffect").getComponent(l.Skeleton),(i=r.node.getComponent(h)).volume=a.volume*a.volumeDetail.character,i.play(),r.node.active=!0,null==(t=r.node.children[0])||t.getComponent(l.Skeleton).setAnimation(0,"animation",!1),r.setAnimation(0,"animation",!1),r.setCompleteListener((function(){return r.node.active=!1}));case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r}(s))||v);r._RF.pop()}}}));

System.register("chunks:///_virtual/HeroUi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./config.ts","./HeroAllHeros.ts","./CharacterEnum.ts"],(function(e){var r,t,n,a,c,o,u,i,s,f,h;return{setters:[function(e){r=e.inheritsLoose,t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,o=e.Component,u=e.director},function(e){i=e.util},function(e){s=e.getConfig},function(e){f=e.HeroAllHeros},function(e){h=e.CharacterEnum}],execute:function(){var l;a._RF.push({},"94827VgnP1HkYkPKV19q/NU","HeroUi",void 0);var p=c.ccclass;c.property,e("HeroUi",p("HeroUi")(l=function(e){function a(){for(var r,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(r=e.call.apply(e,[this].concat(n))||this).$currentCamp="",r}r(a,e);var c=a.prototype;return c.GoBack=function(){var e=t(n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.message.load();case 2:r=e.sent,u.preloadScene("Home",(function(){return r()})),u.loadScene("Home");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c.filterByCamp=function(){var e=t(n().mark((function e(r,t){var a,c,o,u,l,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.node.parent.getChildByName("AllHeros").getComponent(f),c=[],this.node.children.forEach((function(e){var r=e.getChildByName("Light");r&&(r.active=!1)})),this.$currentCamp!==t){e.next=16;break}return o=s(),e.next=7,i.message.load();case 7:return u=e.sent,o.userData.characterQueue.forEach((function(e){return e.forEach((function(e){e&&c.push(e)}))})),c=c.concat(o.userData.characters),e.next=12,a.render(c);case 12:u(),this.$currentCamp="",e.next=28;break;case 16:return this.$currentCamp=t,l=s(),e.next=20,i.message.load();case 20:return p=e.sent,l.userData.characterQueue.forEach((function(e){return e.forEach((function(e){e&&c.push(e)}))})),c=(c=c.concat(l.userData.characters)).filter((function(e){return h[e.id].CharacterCamp===t})),e.next=26,a.render(c);case 26:p(),r.target.getChildByName("Light").active=!0;case 28:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}(),a}(o))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/HolAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts"],(function(n){var t,o,i,a,e,r,s,l,m,c,u,p;return{setters:[function(n){t=n.inheritsLoose,o=n.createClass,i=n.asyncToGenerator,a=n.regeneratorRuntime,e=n.createForOfIteratorHelperLoose},function(n){r=n.cclegacy,s=n._decorator,l=n.Component,m=n.dragonBones,c=n.sp,u=n.resources},function(n){p=n.util}],execute:function(){var h;r._RF.push({},"c3b1bt9bhZD7aGUcUxgw6V8","HolAnimation",void 0);var f=s.ccclass;s.property,n("HolAnimation",f("HolAnimation")(h=function(n){function r(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=n.call.apply(n,[this].concat(i))||this).$animationControl=void 0,t.$lastAnimationPromiseResFunc=null,t}t(r,n);var s=r.prototype;return s.initBones=function(){var n=i(a().mark((function n(t){var o,i,r,s,l;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.bundle.loadDir(t.animationDir,void 0,t.animationBundle||u);case 2:for(i=n.sent,this.node.setScale(t.animationScale||1,t.animationScale||1,this.node.position.z),this.node.setPosition(this.node.position.x+t.animationPosition.x,this.node.position.y+t.animationPosition.y,this.node.position.z),"DrangonBones"===t.animationType?this.$animationControl=this.node.addComponent(m.ArmatureDisplay):"Spine"===t.animationType&&(this.$animationControl=this.node.addComponent(c.Skeleton)),r=e(i);!(s=r()).done;)l=s.value,this.$animationControl instanceof m.ArmatureDisplay?l instanceof m.DragonBonesAsset?this.$animationControl.dragonAsset=l:l instanceof m.DragonBonesAtlasAsset&&(this.$animationControl.dragonAtlasAsset=l):this.$animationControl instanceof c.Skeleton&&l instanceof c.SkeletonData&&(this.$animationControl.skeletonData=l);return this.$animationControl instanceof m.ArmatureDisplay&&(this.$animationControl.armatureName=JSON.parse(null==(o=this.$animationControl.dragonAsset)?void 0:o.dragonBonesJson).armature[0].name),n.abrupt("return");case 9:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),s.playAnimation=function(){var n=i(a().mark((function n(t,o,i){var e=this;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===o&&(o=-1),this.$lastAnimationPromiseResFunc&&(this.$lastAnimationPromiseResFunc(),this.$lastAnimationPromiseResFunc=null),n.abrupt("return",new Promise((function(n){if(e.$animationControl instanceof c.Skeleton){var a=0;e.$animationControl.setAnimation(0,t,!1),e.$animationControl.setCompleteListener((function(){if(++a>=o&&-1!==o)return e.$lastAnimationPromiseResFunc=null,n(),void(i&&e.playAnimation(i));e.$animationControl instanceof c.Skeleton&&e.$animationControl.setAnimation(0,t,!1)}))}else e.$animationControl instanceof m.ArmatureDisplay&&(e.$animationControl.playAnimation(t,o),e.$animationControl.on(m.EventObject.COMPLETE,(function(){e.$lastAnimationPromiseResFunc=null,n(),i&&e.playAnimation(i)}),e));e.$lastAnimationPromiseResFunc=n})));case 3:case"end":return n.stop()}}),n,this)})));return function(t,o,i){return n.apply(this,arguments)}}(),o(r,[{key:"timeScale",get:function(){return this.$animationControl.timeScale},set:function(n){this.$animationControl.timeScale=n}}]),r}(l))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/HolCharacter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OnBeTarget.ts","./CharacterState.ts","./util.ts","./HolAnimation.ts","./ActionState.ts","./HolNumber.ts","./CharacterEnum.ts","./CharacterMetaState.ts"],(function(t){var e,n,a,i,r,s,o,c,u,h,f,l,p,d,m,x,b,g,v,k,C,y,A,$;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,a=t.asyncToGenerator,i=t.regeneratorRuntime,r=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,o=t._decorator,c=t.Component,u=t.Sprite,h=t.Label,f=t.SpriteFrame,l=t.UITransform,p=t.math,d=t.Node,m=t.Prefab,x=t.Font},function(t){b=t.OnBeTarget},function(t){g=t.CharacterState},function(t){v=t.util},function(t){k=t.HolAnimation},function(t){C=t.ActionState},function(t){y=t.HolNumber},function(t){A=t.CharacterEnum},function(t){$=t.getCampHurtPercent}],execute:function(){var w;t("GetCharacterCoordinatePosition",S),s._RF.push({},"3bfddQbW5lMFK9LFBS3IKq/","HolCharacter",void 0);var M=o.ccclass;o.property;function S(t,e,n,a){void 0===a&&(a="ordinary");var i={x:0,y:0};return(e>=1||e<=3)&&(n>=1||n<=3)&&(i.x=195*(n-1)+170-("attack"===a?120:0),i.y=160*(3-e)-230,"left"===t&&(i.x*=-1)),i}t("HolCharacter",M("HolCharacter")(w=function(t){function s(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).$holAnimation=void 0,e.state=void 0,e.direction=void 0,e.coordinate=void 0,e.defaultState="rest",e.$fightMap=void 0,e}e(s,t);var o=s.prototype;return o.initCharacter=function(){var t=a(i().mark((function t(e,n,a,r){var s,o,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a={row:0,col:0}),void 0===r&&(r=null),this.state=new g(e,this),this.direction=n,this.coordinate=a,this.$fightMap=r,s=A[e.id],o=this.node.getChildByName("HolAnimation"),this.$holAnimation=o.getComponent(k),t.next=11,this.$holAnimation.initBones({animationScale:this.state.meta.AnimationScale,animationDir:this.state.meta.AnimationDir,animationType:this.state.meta.AnimationType,animationPosition:this.state.meta.AnimationPosition});case 11:return this.node.addChild(o),this.$holAnimation.playAnimation("rest"),t.next=15,v.bundle.load("image/camp_icon/"+s.CharacterCamp+"/spriteFrame",f);case 15:return this.node.getChildByName("Camp").getComponent(u).spriteFrame=t.sent,c=S(this.direction,this.coordinate.row,this.coordinate.col),this.node.setPosition(c.x,c.y,this.node.position.z),"left"===this.direction?this.$holAnimation.node.setScale(Math.abs(this.$holAnimation.node.scale.x)*this.state.meta.AnimationForward,this.$holAnimation.node.scale.y,this.$holAnimation.node.scale.z):this.$holAnimation.node.setScale(Math.abs(this.$holAnimation.node.scale.x)*-this.state.meta.AnimationForward,this.$holAnimation.node.scale.y,this.$holAnimation.node.scale.z),this.node.getChildByName("State").getChildByName("Lv").getComponent(h).string="Lv:"+e.lv,t.next=22,this.updateUi();case 22:case"end":return t.stop()}}),t,this)})));return function(e,n,a,i){return t.apply(this,arguments)}}(),o.updateUi=function(){var t=a(i().mark((function t(){var e,n,a,s,o,c,h,m,x,b;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.node.getChildByName("State"),n=e.getChildByName("Hp"),a=e.getChildByName("Energy"),this.state.reasonableData(),n.getChildByName("Value").setScale(this.state.hp/this.state.maxHp,n.scale.y,n.scale.z),a.getChildByName("Value").setScale(this.state.energy/this.state.maxEnergy,a.scale.y,a.scale.z),s=[],(o=e.getChildByName("BuffIcon")).removeAllChildren(),c=r(this.state.buff);case 10:if((h=c()).done){t.next=24;break}if(m=h.value,-1===s.indexOf(m.id)){t.next=14;break}return t.abrupt("continue",22);case 14:return x=new d,b=x.addComponent(u),t.next=18,v.bundle.load(m.meta.buffIcon,f);case 18:b.spriteFrame=t.sent,x.getComponent(l).setContentSize(new p.Size(28,28)),o.addChild(x),s.push(m.id);case 22:t.next=10;break;case 24:if(!(this.state.hp<=0)){t.next=27;break}return t.next=27,this.dead();case 27:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.action=function(){var t=a(i().mark((function t(){var e,n,a,s,o,c,u,h,f,l,p,d,m,x,b,g,v,k,y,A,$,w,M,S,B,O;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=new C,this.state.energy>=this.state.maxEnergy&&(e.actionMethod="skill"),n=r(this.state.buff);case 3:if((a=n()).done){t.next=9;break}return s=a.value,t.next=7,s.BeforeAction(s,e,this.$fightMap);case 7:t.next=3;break;case 9:o=r(this.state.equipment);case 10:if((c=o()).done){t.next=16;break}return u=c.value,t.next=14,u.BeforeAction(u,e,this.$fightMap);case 14:t.next=10;break;case 16:return t.next=18,this.state.BeforeAction(this.state,e,this.$fightMap);case 18:if(h=this.node.getSiblingIndex(),this.node.setSiblingIndex(9999),"attack"!==e.actionMethod||!e.canAction){t.next=40;break}f=r(this.state.buff);case 22:if((l=f()).done){t.next=28;break}return p=l.value,t.next=26,p.OnAttack(p,e,this.$fightMap);case 26:t.next=22;break;case 28:d=r(this.state.equipment);case 29:if((m=d()).done){t.next=35;break}return x=m.value,t.next=33,x.OnAttack(x,e,this.$fightMap);case 33:t.next=29;break;case 35:return t.next=37,this.state.OnAttack(this.state,e,this.$fightMap);case 37:this.state.energy+=20+3*this.state.intelligence1,t.next=58;break;case 40:if("skill"!==e.actionMethod||!e.canAction){t.next=58;break}b=r(this.state.buff);case 42:if((g=b()).done){t.next=48;break}return v=g.value,t.next=46,v.OnSkill(v,e,this.$fightMap);case 46:t.next=42;break;case 48:k=r(this.state.equipment);case 49:if((y=k()).done){t.next=55;break}return A=y.value,t.next=53,A.OnSkill(A,e,this.$fightMap);case 53:t.next=49;break;case 55:return t.next=57,this.state.OnSkill(this.state,e,this.$fightMap);case 57:this.state.energy=0;case 58:return t.next=60,this.updateUi();case 60:this.node.setSiblingIndex(h),$=r(this.state.buff);case 62:if((w=$()).done){t.next=68;break}return M=w.value,t.next=66,M.AfterAction(M,this.$fightMap);case 66:t.next=62;break;case 68:S=r(this.state.equipment);case 69:if((B=S()).done){t.next=75;break}return O=B.value,t.next=73,O.AfterAction(O,this.$fightMap);case 73:t.next=69;break;case 75:return t.next=77,this.state.AfterAction(this.state,this.$fightMap);case 77:return t.next=79,this.updateUi();case 79:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.attack=function(){var t=a(i().mark((function t(e,n){var a,s,o,c,u,h,f,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new b).origin=this.state,a.cure=0*this.state.curePercent,a.hurt=e*this.state.hurtPercent*$(this.state.meta.CharacterCamp,n.state.meta.CharacterCamp),a.buff=[],a.hurt=Math.max(a.hurt-.1*n.state.defence,1),s=r(n.state.equipment);case 7:if((o=s()).done){t.next=13;break}return c=o.value,t.next=11,c.OnBeHurt(c,a,this.$fightMap);case 11:t.next=7;break;case 13:u=r(n.state.buff);case 14:if((h=u()).done){t.next=20;break}return f=h.value,t.next=18,f.OnBeHurt(f,a,this.$fightMap);case 18:t.next=14;break;case 20:return t.next=22,n.state.OnBeHurt(n.state,a,this.$fightMap);case 22:return this.$fightMap.isPlayAnimation&&!a.block&&(l=n.$holAnimation.playAnimation("hurt",1,n.defaultState),this.$fightMap.actionAwaitQueue.push(l)),n.state.energy+=10,t.next=26,n.executeTargetState(a);case 26:return t.next=28,this.updateUi();case 28:return t.next=30,n.updateUi();case 30:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),o.cure=function(){var t=a(i().mark((function t(e,n){var a,s,o,c,u,h,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new b).origin=this.state,a.cure=e*this.state.curePercent,a.hurt=0*this.state.hurtPercent,a.buff=[],a.cure+=p.randomRange(-.1,.1)*a.cure,a.hurt+=p.randomRange(-.1,.1)*a.hurt,s=r(n.state.equipment);case 8:if((o=s()).done){t.next=14;break}return c=o.value,t.next=12,c.OnBeCure(c,a,this.$fightMap);case 12:t.next=8;break;case 14:u=r(n.state.buff);case 15:if((h=u()).done){t.next=21;break}return f=h.value,t.next=19,f.OnBeCure(f,a,this.$fightMap);case 19:t.next=15;break;case 21:return t.next=23,n.state.OnBeCure(n.state,a,this.$fightMap);case 23:return t.next=25,n.executeTargetState(a);case 25:return t.next=27,this.updateUi();case 27:return t.next=29,n.updateUi();case 29:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),o.dead=function(){var t=a(i().mark((function t(){var e,n,s=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:-1!==(e=this.$fightMap.allLiveCharacter.indexOf(this))&&this.$fightMap.allLiveCharacter.splice(e,1),this.$fightMap.allDeadCharacter.push(this),n=this.holAnimation.playAnimation("dead",1,this.defaultState),this.$fightMap.actionAwaitQueue.push(n.then((function(){return s.node.active=!1,new Promise(a(i().mark((function t(e){var n,a,o,c,u,h;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r(s.state.buff);case 1:if((a=n()).done){t.next=7;break}return o=a.value,t.next=5,o.OnDead(o,s.$fightMap);case 5:t.next=1;break;case 7:c=r(s.state.equipment);case 8:if((u=c()).done){t.next=14;break}return h=u.value,t.next=12,h.OnDead(h,s.$fightMap);case 12:t.next=8;break;case 14:return t.next=16,s.state.OnDead(s.state,s.$fightMap);case 16:e();case 17:case"end":return t.stop()}}),t)}))))})));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.rebirth=function(){var t=a(i().mark((function t(){var e,n,s=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return-1!==(e=this.$fightMap.allDeadCharacter.indexOf(this))&&this.$fightMap.allDeadCharacter.splice(e,1),this.$fightMap.allLiveCharacter.push(this),n=this.holAnimation.playAnimation("rebirth",1,this.defaultState),this.node.active=!0,this.state.hp<=0&&(this.state.hp=1),t.abrupt("return",new Promise((function(t){s.$fightMap.actionAwaitQueue.push(n.then(a(i().mark((function e(){var n,a,o,c,u,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(s.state.buff);case 1:if((a=n()).done){e.next=7;break}return o=a.value,e.next=5,o.onReBirth(o,s.$fightMap);case 5:e.next=1;break;case 7:c=r(s.state.equipment);case 8:if((u=c()).done){e.next=14;break}return h=u.value,e.next=12,h.onReBirth(h,s.$fightMap);case 12:e.next=8;break;case 14:return e.next=16,s.state.onReBirth(s.state,s.$fightMap);case 16:t();case 17:case"end":return e.stop()}}),e)})))))})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.addBuff=function(){var t=a(i().mark((function t(e,n){var a,s,o,c,u,h,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new b).origin=e.state,a.buff.push(n),t.next=5,this.state.OnBuff(this.state,a,this.$fightMap);case 5:s=r(this.state.equipment);case 6:if((o=s()).done){t.next=12;break}return c=o.value,t.next=10,c.OnBuff(c,a,this.$fightMap);case 10:t.next=6;break;case 12:u=r(this.state.buff);case 13:if((h=u()).done){t.next=19;break}return f=h.value,t.next=17,f.OnBuff(f,a,this.$fightMap);case 17:t.next=13;break;case 19:return t.next=21,this.executeTargetState(a);case 21:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),o.deleteBuff=function(){var t=a(i().mark((function t(e){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==(n=this.state.buff.indexOf(e))){t.next=3;break}return t.abrupt("return");case 3:return this.state.buff[n].OnDeleteFromCharacter(this.state.buff[n]),this.state.buff.splice(n,1),t.next=7,this.updateUi();case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),o.executeTargetState=function(){var t=a(i().mark((function t(e){var n,a,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.block&&this.$fightMap.isPlayAnimation||this.$fightMap.isPlayAnimation&&e.hurt&&(e.critical?this.showNumber(-e.hurt,new p.Color(220,70,70,255),40):this.showNumber(-e.hurt,new p.Color(200,200,200,255),25)),this.$fightMap.isPlayAnimation&&e.cure&&this.showNumber(+e.cure,new p.Color(50,220,50,255),25),this.state.hp-=e.hurt,this.state.hp+=e.cure,n=r(e.buff);case 5:if((a=n()).done){t.next=13;break}return(s=a.value).character=this.state,t.next=10,s.OnAddToCharacter(s);case 10:this.state.buff.push(s);case 11:t.next=5;break;case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),o.showNumber=function(){var t=a(i().mark((function t(e,n,a){var r,s,o,c,u=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=28),t.t0=v.resource,t.next=4,v.bundle.load("prefab/HolNumber",m);case 4:return t.t1=t.sent,r=t.t0.getNodePool.call(t.t0,t.t1),s=r.get(),(o=s.getComponent(y)).color=n,o.frontSize=a,o.number=e,this.node.addChild(s),c=s.getSiblingIndex(),s.setSiblingIndex(9999),t.abrupt("return",new Promise((function(t){var e=0,n=setInterval((function(){if(++e>45)return t(),r.put(s),s.setSiblingIndex(c),s.setPosition(0,0,s.position.z),clearInterval(n);s.setPosition(s.position.x,s.position.y+3,s.position.z)}),20/u.$holAnimation.timeScale)})));case 15:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}(),o.showString=function(){var t=a(i().mark((function t(e){var n,a,r,s,o=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$fightMap.isPlayAnimation){t.next=2;break}return t.abrupt("return");case 2:return n=new d,a=n.addComponent(h),t.next=6,v.bundle.load("font/font_title",x);case 6:return a.font=t.sent,a.string=e,a.fontSize=30,this.node.addChild(n),r=0,s=setInterval((function(){if(r++>45)return clearInterval(s),void o.node.removeChild(n);n.setPosition(n.position.x,n.position.y+2,n.position.z)}),20/this.$holAnimation.timeScale),t.abrupt("return",new Promise((function(t){return setTimeout(t,100)})));case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),o.getFriends=function(t){var e=this;return t.filter((function(t){return t.direction===e.direction}))},o.getEnimies=function(t){var e=this;return t.filter((function(t){return t.direction!==e.direction}))},n(s,[{key:"holAnimation",get:function(){return this.$holAnimation}}]),s}(c))||w);s._RF.pop()}}}));

System.register("chunks:///_virtual/HolCharacterAvatar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./CharacterEnum.ts"],(function(e){var r,t,a,n,o,i,l,c,u,p,s,d,m,h,v;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){l=e.cclegacy,c=e._decorator,u=e.Node,p=e.Component,s=e.Sprite,d=e.Label,m=e.SpriteFrame},function(e){h=e.util},function(e){v=e.CharacterEnum}],execute:function(){var b,g,f,C,y,N,L,A,F,w,B,z,H;l._RF.push({},"43264FbGrBIrqevHgWxp8Hj","HolCharacterAvatar",void 0);var x=c.ccclass,_=c.property;e("HolCharacterAvatar",(b=x("HolCharacterAvatar"),g=_(u),f=_(u),C=_(u),y=_(u),N=_(u),b((F=r((A=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o))||this,a(r,"AvatarNode",F,n(r)),a(r,"LegendBorderNode",w,n(r)),a(r,"BorderNode",B,n(r)),a(r,"CampNode",z,n(r)),a(r,"LvNode",H,n(r)),r}return t(r,e),r.prototype.setCharacter=function(){var e=o(i().mark((function e(r){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v[r.id],e.next=3,h.bundle.load(t.AvatarPath,m);case 3:return this.AvatarNode.getComponent(s).spriteFrame=e.sent,t.CharacterQuality<5&&(this.LegendBorderNode.active=!1),e.next=7,h.bundle.load("image/quality_border/"+t.CharacterQuality+"/spriteFrame",m);case 7:return this.BorderNode.getComponent(s).spriteFrame=e.sent,e.next=10,h.bundle.load("image/camp_icon/"+t.CharacterCamp+"/spriteFrame",m);case 10:this.CampNode.getComponent(s).spriteFrame=e.sent,this.LvNode.getComponent(d).string="Lv: "+r.lv;case 12:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),r}(p)).prototype,"AvatarNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=r(A.prototype,"LegendBorderNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=r(A.prototype,"BorderNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=r(A.prototype,"CampNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=r(A.prototype,"LvNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=A))||L));l._RF.pop()}}}));

System.register("chunks:///_virtual/HolCharactersQueue.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./HolCharacterAvatar.ts"],(function(e){var t,r,n,o,a,c,i,u,s,l,p,f,h,d,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,c=e.regeneratorRuntime,i=e.createForOfIteratorHelperLoose},function(e){u=e.cclegacy,s=e._decorator,l=e.Node,p=e.Component,f=e.Button,h=e.Prefab},function(e){d=e.util},function(e){C=e.HolCharacterAvatar}],execute:function(){var b,v,g,m,y;u._RF.push({},"abd83hH2fBAwbvcAJ5rKFLb","HolCharactersQueue",void 0);var H=s.ccclass,k=s.property;e("HolCharactersQueue",(b=H("HolCharactersQueue"),v=k(l),b((y=t((m=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,n(t,"ContentNode",y,o(t)),t}return r(t,e),t.prototype.render=function(){var e=a(c().mark((function e(t,r){var n,o,a,u,s,l,p,b=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d.resource,e.next=3,d.bundle.load("prefab/HolCharacterAvatar",h);case 3:for(e.t1=e.sent,n=e.t0.getNodePool.call(e.t0,e.t1),o=[].concat(this.ContentNode.children),a=0;a<o.length;a++)(u=o[a]).off("click"),u.getComponent(f).transition=0,n.put(u);s=c().mark((function e(){var t,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.value,o=n.get(),o.getComponent(C).setCharacter(t),o.getComponent(f).transition=3,o.getComponent(f).zoomScale=.9,b.ContentNode.addChild(o),o.on("click",(function(){r&&r(t,o)})),e.abrupt("return","continue");case 9:case"end":return e.stop()}}),e)})),l=i(t);case 9:if((p=l()).done){e.next=16;break}return e.delegateYield(s(),"t2",11);case 11:if("continue"!==e.t2){e.next=14;break}return e.abrupt("continue",14);case 14:e.next=9;break;case 16:return e.abrupt("return");case 17:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),t}(p)).prototype,"ContentNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=m))||g));u._RF.pop()}}}));

System.register("chunks:///_virtual/HolConfirmMessage.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,s,r,c,i,u,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,i=e.Node,u=e.Label,a=e.Toggle,l=e.Component}],execute:function(){var f,g,h,p,m;r._RF.push({},"a13cfh3ZHlNRaNMDvNyEpUp","HolConfirmMessage",void 0);var C=c.ccclass,d=c.property;e("HolConfirmMessage",(f=C("HolConfirmMessage"),g=d(i),f((m=t((p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,o(t,"ContentNode",m,s(t)),t.$sureQueue=[],t.$cancelQueue=[],t.$closeQueue=[],t}n(t,e);var r=t.prototype;return r.setContent=function(e){if(this.node.getChildByName("Title").getComponent(u).string=e.title||"标题",e.message=e.message.replace(/ /gi,""),e.message=e.message.replace(/&nbsp;/gi," "),this.ContentNode.getComponent(u).string=e.message,e.selectBoxMessage){var t=this.node.getChildByName("Radio");t.active=!0,t.getChildByName("RadioMessage").getComponent(u).string=e.selectBoxMessage,t.on("click",(function(){e.selectBoxCallback&&e.selectBoxCallback(t.getComponent(a).isChecked)}))}this.$sureQueue.concat(Array.from(e.sureQueue||[])),this.$cancelQueue.concat(Array.from(e.cancelQueue||[])),this.$closeQueue.concat(Array.from(e.closeQueue||[]))},r.listen=function(e,t){return"sure"===e?this.$sureQueue.push(t):"cancel"===e?this.$cancelQueue.push(t):"close"===e?this.$closeQueue.push(t):void 0},r.sure=function(){this.$sureQueue.forEach((function(e){return e()}))},r.cancel=function(){this.$cancelQueue.forEach((function(e){return e()}))},r.closeConfirm=function(){this.$closeQueue.forEach((function(e){return e()}))},t}(l)).prototype,"ContentNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=p))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/HolIntroduceMessage.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,a,c,i,s,u,l,d,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,c=e.regeneratorRuntime,i=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,u=e._decorator,l=e.Node,d=e.Label,p=e.Component}],execute:function(){var g,f,h,m,v;s._RF.push({},"9e604r1pLVLpow1G6R+RIFb","HolIntroduceMessage",void 0);var y=u.ccclass,C=u.property;e("HolIntroduceMessage",(g=y("HolIntroduceMessage"),f=C(l),g((v=t((m=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,o(t,"ContentNode",v,r(t)),t.$closeQueue=[],t}n(t,e);var s=t.prototype;return s.listen=function(e,t){"close"===e&&this.$closeQueue.push(t)},s.setContent=function(e){var t=this;this.ContentNode.getComponent(d).string=e.message;var n=this.node.getChildByName("Introduce");if(e.buttonOne){var o=n.getChildByName("ButtonOne");o.getChildByName("Value").getComponent(d).string=e.buttonOne.message,o.active=!0,o.on("click",a(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.buttonOne.callback();case 2:t.closeNode();case 3:case"end":return n.stop()}}),n)}))))}if(e.buttonTwo){var r=n.getChildByName("ButtonTwo");r.getChildByName("Value").getComponent(d).string=e.buttonTwo.message,r.active=!0,r.on("click",a(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.buttonTwo.callback();case 2:t.closeNode();case 3:case"end":return n.stop()}}),n)}))))}},s.closeNode=function(){var e=this.node.getChildByName("Introduce");e.getChildByName("ButtonOne").off("click"),e.getChildByName("ButtonTwo").off("click");for(var t,n=i(this.$closeQueue);!(t=n()).done;){(0,t.value)()}},t}(p)).prototype,"ContentNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=m))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/HolLoadMessage.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.Component}],execute:function(){var s;n._RF.push({},"588055++QlNL67j7hLQM/wK","HolLoadMessage",void 0);var a=o.ccclass;o.property,e("HolLoadMessage",a("HolLoadMessage")(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).$event=new Map,t}t(n,e);var o=n.prototype;return o.listen=function(e,t){var n=this.$event.get(e);if(!n)return n=[t],this.$event.set(e,n);n.push(t)},o.closeLoad=function(){var e;this.$event&&(null==(e=this.$event.get("close"))||e.forEach((function(e){return e()})))},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/HolNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts"],(function(e){var t,r,n,o,i,c,s,u,a,l,f,h,p;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){i=e.cclegacy,c=e._decorator,s=e.math,u=e.Sprite,a=e.Component,l=e.Node,f=e.UITransform,h=e.SpriteFrame},function(e){p=e.util}],execute:function(){var m;i._RF.push({},"90730rFfrBASI/TD6/96svv","HolNumber",void 0);var d=c.ccclass;c.property,e("HolNumber",d("HolNumber")(m=function(e){function i(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).$color=new s.Color(255,255,255,255),t.$number=0,t.$frontSize=28,t}return t(i,e),i.prototype.renderNumber=function(){var e=n(o().mark((function e(t,r){var n,i,c,a,m,d=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.node.removeAllChildren(),n=((t>0?"+":"-")+t).replace("--","-"),i=Math.floor(n.length/2),e.next=5,p.bundle.loadDir("image/number",h);case 5:c=e.sent,a=o().mark((function e(t){var a,h,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new l,d.node.addChild(a),(h=a.addComponent(u)).spriteFrame=c.filter((function(e){return e.name===n.charAt(t)}))[0],"-"!==n.charAt(t)&&h.getComponent(f).setContentSize(new s.Size(r,r)),p=r-.3*r,t<i?a.setPosition(-p*(i-t),0,a.position.z):a.setPosition(p*(t-i),0,a.position.z),a.getComponent(u).color=d.$color;case 8:case"end":return e.stop()}}),e)})),m=0;case 8:if(!(m<n.length)){e.next=13;break}return e.delegateYield(a(m),"t0",10);case 10:m++,e.next=8;break;case 13:return e.abrupt("return");case 14:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r(i,[{key:"color",get:function(){return this.$color},set:function(e){var t=this;this.$color=e,this.node.children.forEach((function(e){e.getComponent(u).color=t.$color}))}},{key:"number",get:function(){return this.$number},set:function(e){this.$number=Math.ceil(e),this.renderNumber(this.$number,this.frontSize).then()}},{key:"frontSize",get:function(){return this.$frontSize},set:function(e){this.$frontSize=e}}]),i}(a))||m);i._RF.pop()}}}));

System.register("chunks:///_virtual/HolNumberAddReduce.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,u,i,o,a,c,s,l,d;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,u=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose,o=e.createClass},function(e){a=e.cclegacy,c=e._decorator,s=e.Node,l=e.EditBox,d=e.Component}],execute:function(){var h,b,m,f,p;a._RF.push({},"8ffbdo0uGxOJqdYlAy754ac","HolNumberAddReduce",void 0);var g=c.ccclass,v=c.property;e("HolNumberAddReduce",(h=g("HolNumberAddReduce"),b=v(s),h((p=r((f=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,n(r,"NumberValueNode",p,u(r)),r.$number=0,r.changeQueue=[],r}t(r,e);var a=r.prototype;return a.listen=function(e,r){"change"===e&&this.changeQueue.push(r)},a.add=function(){for(var e,r=i(this.changeQueue);!(e=r()).done;){if(!(0,e.value)(this.$number,this.$number+1))return}this.$number++,this.number=this.$number},a.reduce=function(){for(var e,r=i(this.changeQueue);!(e=r()).done;){if(!(0,e.value)(this.$number,this.$number-1))return}this.$number--,this.number=this.$number},o(r,[{key:"number",get:function(){return this.$number},set:function(e){this.NumberValueNode.getComponent(l).string=e+""}}]),r}(d)).prototype,"NumberValueNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=f))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/HolPreLoad.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,o,s,c,u,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,c=e.Node,u=e.Label,a=e.Component}],execute:function(){var l,p,h,d,$,f,m;o._RF.push({},"e0658jyqi1Hab8ELGP3Cby0","HolPreLoad",void 0);var y=s.ccclass,b=s.property;e("HolPreLoad",(l=y("HolPreLoad"),p=b(c),h=b(c),l((f=t(($=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,r(t,"ValueNode",f,n(t)),r(t,"TipNode",m,n(t)),t.$tips=["initalizing..."],t.$current=0,t.$process=0,t.$completeQueue=[],t.$currentIndex=0,t.$accumulateTime=0,t}i(t,e);var o=t.prototype;return o.setProcess=function(e){this.$process=e},o.setTips=function(e){this.$tips=e},o.listenComplete=function(e){this.$completeQueue.push(e)},o.update=function(e){if(this.$current>=100)return this.$completeQueue.forEach((function(e){return e()})),void(this.node.active=!1);this.$current<this.$process&&(this.$current+=55*e,this.ValueNode.setScale(this.$current/100,1,1)),this.$accumulateTime-=e,this.$accumulateTime<=0&&(this.TipNode.getComponent(u).string=this.$tips[this.$currentIndex],this.$currentIndex++,this.$accumulateTime=4,this.$currentIndex>=this.$tips.length&&(this.$currentIndex=0))},t}(a)).prototype,"ValueNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t($.prototype,"TipNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=$))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/HolPromptMessage.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s,i,n,o;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,i=e._decorator,n=e.Label,o=e.Component}],execute:function(){var c;s._RF.push({},"3c34dRaeCxFL4aiCMPWE0ex","HolPromptMessage",void 0);var a=i.ccclass;i.property,e("HolPromptMessage",a("HolPromptMessage")(c=function(e){function s(){for(var t,s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this).$state=0,t.$time=0,t.$continueTime=1,t.$closeQueue=[],t}t(s,e);var i=s.prototype;return i.setContent=function(e){this.node.getChildByName("Message").getComponent(n).string=e.message,this.$state=0,this.node.setScale(0,0,0),this.$continueTime=e.continueTime||1},i.update=function(e){0===this.$state?this.node.scale.x>=1?(this.node.setScale(1,1,1),this.$state=1,this.$time=0):this.node.setScale(this.node.scale.x+10*e,this.node.scale.y+10*e,this.node.scale.z):1===this.$state?(this.$time>=this.$continueTime&&(this.$state=2),this.$time+=e):2===this.$state&&this.$closeQueue.forEach((function(e){return e()}))},i.listen=function(e,t){"close"===e&&this.$closeQueue.push(t)},s}(o))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/HolUserResource.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./config.ts"],(function(e){var t,o,r,n,s,u,i;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,n=e.Label,s=e.Component},function(e){u=e.util},function(e){i=e.getConfig}],execute:function(){var a;o._RF.push({},"f651b+tgJ1PArZC5yDsI4gx","HolUserResource",void 0);var l=r.ccclass;r.property,e("HolUserResource",l("HolUserResource")(a=function(e){function o(){return e.apply(this,arguments)||this}t(o,e);var r=o.prototype;return r.start=function(){this.render()},r.render=function(){var e=i();this.node.getChildByName("Gold").getChildByName("Value").getComponent(n).string=u.sundry.formateNumber(e.userData.gold),this.node.getChildByName("Diamond").getChildByName("Value").getComponent(n).string=u.sundry.formateNumber(e.userData.diamond),this.node.getChildByName("Soul").getChildByName("Value").getComponent(n).string=u.sundry.formateNumber(e.userData.soul)},o}(s))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/HomeBuildings.ts",["./rollupPluginModLoBabelHelpers.js","cc","./config.ts"],(function(n){var t,e,o,r,i,s,u,c,a;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){r=n.cclegacy,i=n._decorator,s=n.Node,u=n.Component,c=n.screen},function(n){a=n.getConfig}],execute:function(){var p;r._RF.push({},"da25etjLhZJAowJ6tiKMh8S","HomeBuildings",void 0);var h=i.ccclass;i.property,n("HomeBuildings",h("HomeBuildings")(p=function(n){function r(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=n.call.apply(n,[this].concat(o))||this).$FrameSize=void 0,t.$lastPositionX=-1,t}t(r,n);var i=r.prototype;return i.start=function(){var n=e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(),this.node.on(s.EventType.TOUCH_MOVE,this.onNodeTouchMove,this),this.node.on(s.EventType.TOUCH_END,this.onNodeTouchEnd,this),this.$FrameSize=c.windowSize;case 4:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),i.onDestroy=function(){this.node.off(s.EventType.TOUCH_MOVE,this.onNodeTouchMove,this),this.node.off(s.EventType.TOUCH_END,this.onNodeTouchEnd,this)},i.onNodeTouchMove=function(n){var t=n.touch.getLocationX();if(-1!==this.$lastPositionX){var e=this.node.position.x+.9*(t-this.$lastPositionX);Math.abs(e)<=(1826-this.$FrameSize.width)/2&&this.node.setPosition(e,this.node.position.y,this.node.position.z)}this.$lastPositionX=t},i.onNodeTouchEnd=function(){this.$lastPositionX=-1},i.OpenLevelMap=function(){var n=e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),i.OpenShopMap=function(){var n=e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),i.OpenCourageMap=function(){var n=e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),i.OpenDrawCard=function(){var n=e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),i.OpenConquer=function(){var n=e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),r}(u))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/HomeCanvas.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./config.ts"],(function(t){var n,e,r,o,i,a,s,u,c,p;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy,i=t._decorator,a=t.Component,s=t.AudioSource,u=t.AudioClip},function(t){c=t.util},function(t){p=t.getConfig}],execute:function(){var l;o._RF.push({},"0c45fQKpEhJwIKtdrbKP0ie","HomeCanvas",void 0);var f=i.ccclass;i.property,t("HomeCanvas",f("HomeCanvas")(l=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var i=o.prototype;return i.start=function(){var t=e(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.message.load({});case 2:return n=t.sent,t.next=5,this.initMusic();case 5:n();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.initMusic=function(){var t=e(r().mark((function t(){var n,e,o,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p(),t.next=3,c.bundle.loadDir("sound/home",u);case 3:e=t.sent,o=e[Math.floor(e.length*Math.random())],(i=this.node.getComponent(s)).clip=o,i.volume=n.volume*n.volumeDetail.home,i.play();case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o}(a))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/HomeUi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts"],(function(e){var n,r,t,o,c,i,u,s;return{setters:[function(e){n=e.inheritsLoose,r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){o=e.cclegacy,c=e._decorator,i=e.Component,u=e.director},function(e){s=e.util}],execute:function(){var a;o._RF.push({},"782cf+Dy9dFf7O/Zh1qXRXq","HomeUi",void 0);var p=c.ccclass;c.property,e("HomeUi",p("HomeUi")(a=function(e){function o(){return e.apply(this,arguments)||this}return n(o,e),o.prototype.OpenHero=function(){var e=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.message.load();case 2:n=e.sent,u.preloadScene("Hero",(function(){n()})),u.loadScene("Hero");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o}(i))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/introduce.ts",["./rollupPluginModLoBabelHelpers.js","cc","./getNodePool.ts","./HolIntroduceMessage.ts","./load2.ts"],(function(t){var e,n,r,o,u,c,s,a;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t.Prefab,u=t.find},function(t){c=t.getNodePool},function(t){s=t.HolIntroduceMessage},function(t){a=t.load}],execute:function(){function i(){return(i=e(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=c,t.next=3,a("prefab/HolIntroduceMessage",o);case 3:t.t1=t.sent,e=(0,t.t0)(t.t1),r=e.get(),e.put(r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=e(n().mark((function t(e,r){var i,p,f;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=u("Canvas")),t.t0=c,t.next=4,a("prefab/HolIntroduceMessage",o);case 4:return t.t1=t.sent,i=(0,t.t0)(t.t1),p=i.get(),r.addChild(p),f=p.getComponent(s),t.abrupt("return",new Promise((function(t){f.setContent(e),f.listen("close",(function(){return i.put(p)}))})));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t({introduce:function(t,e){return p.apply(this,arguments)},preloadIntroduce:function(){return i.apply(this,arguments)}}),r._RF.push({},"7813cJiEYFMHZcPLh9vPtD6","introduce",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/ItemEnum.ts",["cc","./error.ts"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.error}],execute:function(){e("RegisterCharacter",(function(e){return function(t){if(n[e.id])return r("The id: "+e.id+" has been registered");n[e.id]=t.getMetaInstance(e.id)}})),t._RF.push({},"30088LeJKRJlJWXPBhjrh1u","ItemEnum",void 0);var n=e("ItemEnum",{});t._RF.pop()}}}));

System.register("chunks:///_virtual/ItemMetaState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasicMetaState.ts"],(function(t){var e,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){a=t.BasicMetaState}],execute:function(){n._RF.push({},"15cf8CfWJ1OSo2HbYVNf9KG","ItemMetaState",void 0);t("ItemMetaState",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasicState.ts"],(function(t){var e,n,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){c=t.BasicState}],execute:function(){n._RF.push({},"a057bmQFSBNhpXMp9JH6YVg","ItemState",void 0);t("ItemState",function(t){function n(){for(var e,n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))||this).number=0,e}return e(n,t),n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/load.ts",["./rollupPluginModLoBabelHelpers.js","cc","./load2.ts","./getNodePool.ts","./HolLoadMessage.ts"],(function(t){var e,n,r,o,a,s,u,c;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t.Prefab,a=t.find},function(t){s=t.load},function(t){u=t.getNodePool},function(t){c=t.HolLoadMessage}],execute:function(){function i(){return(i=e(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=u,t.next=3,s("prefab/HolLoadMessage",o);case 3:t.t1=t.sent,e=(0,t.t0)(t.t1),r=e.get(),e.put(r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(){return(l=e(n().mark((function t(e,r){var i,l,p;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=a("Canvas")),t.t0=u,t.next=4,s("prefab/HolLoadMessage",o);case 4:return t.t1=t.sent,i=(0,t.t0)(t.t1),l=i.get(),r.addChild(l),(p=l.getComponent(c)).listen("close",(function(){return i.put(l)})),t.abrupt("return",(function(){return p.closeLoad()}));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t({load:function(t,e){return l.apply(this,arguments)},preloadLoad:function(){return i.apply(this,arguments)}}),r._RF.push({},"60768CJMs1BDZXefuBBabPN","load",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/load2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./error.ts"],(function(r){var e,n,t,u,o;return{setters:[function(r){e=r.asyncToGenerator,n=r.regeneratorRuntime},function(r){t=r.cclegacy,u=r.resources},function(r){o=r.error}],execute:function(){r("load",(function(r,e,n){return c.apply(this,arguments)})),t._RF.push({},"74b1fzJZGZECYYSd5uum95E","load",void 0);var a=new Map;function c(){return(c=e(n().mark((function r(e,t,c){var s,i;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=c||u,(s=a.get(c))||a.set(c,s=new Map),!(i=s.get(e))){r.next=6;break}return r.abrupt("return",i);case 6:return r.abrupt("return",new Promise((function(r){c.load(e,t,(function(n,t){return n?(o(n),r(null)):(s.set(e,t),r(t))}))})));case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}t._RF.pop()}}}));

System.register("chunks:///_virtual/loadDir.ts",["./rollupPluginModLoBabelHelpers.js","cc","./error.ts"],(function(r){var e,n,t,u,o;return{setters:[function(r){e=r.asyncToGenerator,n=r.regeneratorRuntime},function(r){t=r.cclegacy,u=r.resources},function(r){o=r.error}],execute:function(){r("loadDir",(function(r,e,n){return c.apply(this,arguments)})),t._RF.push({},"40d10CehbZGkLny3tu46Ccz","loadDir",void 0);var a=new Map;function c(){return(c=e(n().mark((function r(e,t,c){var i,s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=c||u,(i=a.get(c))||a.set(c,i=new Map),!(s=i.get(e))){r.next=6;break}return r.abrupt("return",s);case 6:return r.abrupt("return",new Promise((function(r){c.loadDir(e,t,(function(n,t){return n?(o(n),r(null)):(i.set(e,t),r(t))}))})));case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}t._RF.pop()}}}));

System.register("chunks:///_virtual/log.ts",["cc"],(function(t){var c,e;return{setters:[function(t){c=t.cclegacy,e=t.log}],execute:function(){t("log",(function(){return e.apply(void 0,arguments)})),c._RF.push({},"80c166CKFdM2oUAbx4b4e0Z","log",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./common.ts","./config.ts","./ActionState.ts","./BasicMetaState.ts","./BasicState.ts","./OnBeTarget.ts","./RoundState.ts","./BuffEnum.ts","./BuffMetaState.ts","./BuffState.ts","./CharacterEnum.ts","./CharacterMetaState.ts","./CharacterState.ts","./EquipmentEnum.ts","./EquipmentMetaState.ts","./EquipmentState.ts","./ItemEnum.ts","./ItemMetaState.ts","./ItemState.ts","./bleed.ts","./fear.ts","./vertigo.ts","./fearOfDemons.ts","./sunwukong.ts","./HolAnimation.ts","./HolCharacter.ts","./HolCharacterAvatar.ts","./HolCharactersQueue.ts","./HolConfirmMessage.ts","./HolIntroduceMessage.ts","./HolLoadMessage.ts","./HolNumber.ts","./HolNumberAddReduce.ts","./HolPreLoad.ts","./HolPromptMessage.ts","./HolUserResource.ts","./CommonCanvas.ts","./FightFailure.ts","./FightMap.ts","./FightSuccess.ts","./FightUi.ts","./FightCanvas.ts","./HeroCharacterDetailPorperty.ts","./HeroAllHeros.ts","./HeroCharacterDetail.ts","./HeroUi.ts","./HeroCanvas.ts","./HomeBuildings.ts","./HomeUi.ts","./HomeCanvas.ts","./PreloadCanvas.ts","./load2.ts","./loadDir.ts","./confirm.ts","./introduce.ts","./load.ts","./prompt.ts","./error.ts","./log.ts","./getNodePool.ts","./formateNumber.ts","./moveNodeToPosition.ts","./util.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/moveNodeToPosition.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,i,n;return{setters:[function(o){t=o.asyncToGenerator,i=o.regeneratorRuntime},function(o){n=o.cclegacy}],execute:function(){function e(){return(e=t(i().mark((function o(t,n){var e;return i().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n.moveCurve=n.moveCurve||!1,n.forbidRotation=n.forbidRotation||!0,n.moveTimeScale=n.moveTimeScale||1,e={x:t.position.x,y:t.position.y},n.curveFunc=n.curveFunc||function(o){var t=(o.targtePosition.x-e.x)/o.timesAmount,i=(o.targtePosition.y-e.y)/o.timesAmount;return{x:o.currentPosition.x+t,y:o.currentPosition.y+i}},o.abrupt("return",new Promise((function(o){if(!n.moveCurve)return t.setPosition(n.targetPosition.x,n.targetPosition.y,t.position.z),o();var i=0,r={x:t.position.x,y:t.position.y},s=setInterval((function(){if(i>=25)return clearInterval(s),o();n.forbidRotation||(t.angle=Math.atan((r.x-t.position.x)/(r.y-t.position.y))),t.setPosition(r.x,r.y),i++,r=n.curveFunc({times:i,timesAmount:25,originPosition:e,targtePosition:n.targetPosition,currentPosition:{x:t.position.x,y:t.position.y}})}),16/n.moveTimeScale)})));case 6:case"end":return o.stop()}}),o)})))).apply(this,arguments)}o("moveNodeToPosition",(function(o,t){return e.apply(this,arguments)})),n._RF.push({},"c50e64JX+JEWJYXIdYlB9Xx","moveNodeToPosition",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/OnBeTarget.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"5fb03SHsJJO37Pc9NP6KEU5","OnBeTarget",void 0);t("OnBeTarget",(function(){this.hurt=0,this.cure=0,this.block=!1,this.critical=!1,this.buff=[],this.origin=null}));e._RF.pop()}}}));

System.register("chunks:///_virtual/PreloadCanvas.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HolPreLoad.ts","./util.ts"],(function(e){var r,t,o,n,s,a,c,u,i,l;return{setters:[function(e){r=e.inheritsLoose,t=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){n=e.cclegacy,s=e._decorator,a=e.Component,c=e.director,u=e.SpriteFrame},function(e){i=e.HolPreLoad},function(e){l=e.util}],execute:function(){var p;n._RF.push({},"5059bpBj49Exahgfu6oqXfN","PreloadCanvas",void 0);var d=s.ccclass;s.property,e("PreloadCanvas",d("PreloadCanvas")(p=function(e){function n(){return e.apply(this,arguments)||this}return r(n,e),n.prototype.start=function(){var e=t(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preloadScene("Home"),r=this.node.getChildByName("HolPreLoad").getComponent(i),c.preloadScene("Home"),r.setProcess(20),e.next=6,l.message.preloadConfirm();case 6:return r.setProcess(30),e.next=9,l.message.preloadPrompt();case 9:return r.setProcess(40),e.next=12,l.message.preloadLoad();case 12:return r.setProcess(60),e.next=15,l.bundle.loadDir("image/number",u);case 15:r.setProcess(70),l.message.preloadIntroduce(),r.setProcess(80),r.setProcess(100),r.listenComplete((function(){return c.loadScene("Home")}));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n}(a))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/prompt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./load2.ts","./getNodePool.ts","./HolPromptMessage.ts"],(function(t){var e,n,r,o,s,u,a,p;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t.Prefab,s=t.find},function(t){u=t.load},function(t){a=t.getNodePool},function(t){p=t.HolPromptMessage}],execute:function(){function c(){return(c=e(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,u("prefab/HolPromptMessage",o);case 3:t.t1=t.sent,e=(0,t.t0)(t.t1),r=e.get(),e.put(r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return(i=e(n().mark((function t(e,r){var c,i,f;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=s("Canvas")),t.t0=a,t.next=4,u("prefab/HolPromptMessage",o);case 4:return t.t1=t.sent,c=(0,t.t0)(t.t1),i=c.get(),r.addChild(i),(f=i.getComponent(p)).setContent(e),t.abrupt("return",new Promise((function(t){f.listen("close",(function(){c.put(i),t()}))})));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t({preloadPrompt:function(){return c.apply(this,arguments)},prompt:function(t,e){return i.apply(this,arguments)}}),r._RF.push({},"21c76hCv99I5pqdC+uYlRfi","prompt",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/RoundState.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"2b37avvuPdDwa+/G8LCoeoH","RoundState",void 0);t("RoundState",(function(){}));e._RF.pop()}}}));

System.register("chunks:///_virtual/sunwukong.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HolCharacter.ts","./util.ts","./CharacterEnum.ts","./CharacterMetaState.ts"],(function(){var e,t,n,o,r,a,i,c,u;return{setters:[function(r){e=r.inheritsLoose,t=r.asyncToGenerator,n=r.regeneratorRuntime,o=r.createForOfIteratorHelperLoose},function(e){r=e.cclegacy},function(e){a=e.GetCharacterCoordinatePosition},function(e){i=e.util},function(e){c=e.RegisterCharacter},function(e){u=e.CharacterMetaState}],execute:function(){var s;r._RF.push({},"b5ba8pN1lZA0K1g+gBcnDhG","sunwukong",void 0);c({id:"sunwukong"})(s=function(r){function c(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))||this).name="孙悟空",e.AnimationDir="game/fight_entity/character/sunwukong",e.AnimationType="Spine",e.AvatarPath="game/fight_entity/character/sunwukong/avatar/spriteFrame",e.CharacterCamp="sacred",e.CharacterQuality=5,e.AnimationScale=.7,e.HpGrowth=70,e.AttackGrowth=25,e.DefenceGrowth=20,e.PierceGrowth=10,e.SpeedGrowth=15,e.Energy=100,e.strength=10,e.agility=10,e.intelligence=10,e.PassiveIntroduceOne="\n    \n    额外获得 20% 速度\n    额外获得 20% 攻击力\n    额外获得 20% 护甲穿透\n    ".replace(/ /gi,""),e.PassiveIntroduceTwo="\n    \n    额外获得 20% 生命值\n    额外获得 20% 攻击力\n    每次攻击后有 20% 概率再次出手\n    ".replace(/ /gi,""),e.SkillIntroduce="\n    \n    对一排敌人造成150%攻击力的伤害\n    并且眩晕敌人2回合\n    ".replace(/ /gi,""),e}e(c,r);var u=c.prototype;return u.OnCreateState=function(e){},u.GetOnAttack=function(){return t(n().mark((function e(t,r,c){var u,s,l,m,d,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t.component,s=u.getEnimies(c.allLiveCharacter).sort((function(e,t){return e.coordinate.col-t.coordinate.col})),l=s[0]){e.next=5;break}return e.abrupt("return");case 5:if(r.targets.push(l.state),!c.isPlayAnimation){e.next=11;break}return e.next=9,i.sundry.moveNodeToPosition(u.node,{moveCurve:!0,targetPosition:a(l.direction,l.coordinate.row,l.coordinate.col,"attack"),moveTimeScale:t.component.holAnimation.timeScale});case 9:return e.next=11,u.holAnimation.playAnimation("attack",1,u.defaultState);case 11:m=o(r.targets);case 12:if((d=m()).done){e.next=18;break}return p=d.value,e.next=16,u.attack(1*t.attack,p.component);case 16:e.next=12;break;case 18:if(!c.isPlayAnimation){e.next=21;break}return e.next=21,i.sundry.moveNodeToPosition(u.node,{moveCurve:!0,targetPosition:a(u.direction,u.coordinate.row,u.coordinate.col),moveTimeScale:t.component.holAnimation.timeScale});case 21:return e.abrupt("return");case 22:case"end":return e.stop()}}),e)})))},u.GetOnSkill=function(){return t(n().mark((function e(t,r,c){var u,s,l,m,d,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t.component,s=u.getEnimies(c.allLiveCharacter).sort((function(e,t){return e.coordinate.col-t.coordinate.col})),l=s[0]){e.next=5;break}return e.abrupt("return");case 5:if(r.targets.push(l.state),s.forEach((function(e,t){0!==t&&e.coordinate.row===l.coordinate.row&&r.targets.push(e.state)})),!c.isPlayAnimation){e.next=13;break}return e.next=10,i.sundry.moveNodeToPosition(u.node,{moveCurve:!0,targetPosition:a(l.direction,l.coordinate.row,l.coordinate.col,"attack"),moveTimeScale:t.component.holAnimation.timeScale});case 10:return e.next=12,u.holAnimation.playAnimation("skill",1);case 12:u.holAnimation.playAnimation(u.defaultState);case 13:for(m=o(r.targets);!(d=m()).done;)p=d.value,c.actionAwaitQueue.push(u.attack(1.5*t.attack,p.component));if(!c.isPlayAnimation){e.next=17;break}return e.next=17,i.sundry.moveNodeToPosition(u.node,{moveCurve:!0,targetPosition:a(u.direction,u.coordinate.row,u.coordinate.col),moveTimeScale:t.component.holAnimation.timeScale});case 17:return e.abrupt("return");case 18:case"end":return e.stop()}}),e)})))},c}(u));r._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc","./load2.ts","./loadDir.ts","./error.ts","./log.ts","./load.ts","./confirm.ts","./prompt.ts","./getNodePool.ts","./moveNodeToPosition.ts","./introduce.ts","./formateNumber.ts"],(function(o){var t,r,e,n,i,d,u,c,l,a,s,f,m,p,N,g;return{setters:[function(o){t=o.cclegacy},function(o){r=o.load},function(o){e=o.loadDir},function(o){n=o.error},function(o){i=o.log},function(o){d=o.load,u=o.preloadLoad},function(o){c=o.confirm,l=o.preloadConfirm},function(o){a=o.prompt,s=o.preloadPrompt},function(o){f=o.getNodePool},function(o){m=o.moveNodeToPosition},function(o){p=o.introduce,N=o.preloadIntroduce},function(o){g=o.formateNumber}],execute:function(){t._RF.push({},"c5e57ZNewtD8KHErjWPCqWd","util",void 0);o("util",{out:{log:i,error:n},bundle:{load:r,loadDir:e},resource:{getNodePool:f},message:{prompt:a,preloadPrompt:s,confirm:c,preloadConfirm:l,load:d,preloadLoad:u,introduce:p,preloadIntroduce:N},sundry:{moveNodeToPosition:m,formateNumber:g}});t._RF.pop()}}}));

System.register("chunks:///_virtual/vertigo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEnum.ts","./BuffMetaState.ts"],(function(t){var e,n,r,o,i,c;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){i=t.RegisterBuff},function(t){c=t.BuffMetaState}],execute:function(){var u;o._RF.push({},"786ce3EhB9H94rJhFrGQpUT","vertigo",void 0);t("VertigoBuff",i({id:"vertigo"})(u=function(t){function o(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).name="眩晕",e.isDeBuff=!0,e.introduce="眩晕后无法行动",e.buffIcon="game/fight_entity/buff/vertigo/spriteFrame",e}return e(o,t),o.prototype.GetBeforeAction=function(){return n(r().mark((function t(e,n,o){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.isPlayAnimation){t.next=3;break}return t.next=3,e.character.component.showString("眩晕");case 3:n.canAction=!1;case 4:case"end":return t.stop()}}),t)})))},o}(c))||u);o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});